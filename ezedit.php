<?php

#die("Not authorized");
new EzEdit();

class EzEdit
{
var $editor_code;
var $configuration = array(
	'plugin' => null, // plugin == null => use the built-in code, which handles simple html sites
	'index' => 'index.html', // plugin == null => use this as default index page
	'path' => './',
	'username' => 'admin', // Change this!
	'password' => 'password', // Change _at least_ this!
);

	/*
	 * Register callback hooks: called by plugins when registering
	 * Public
	 */
	function register_hook($key, $callback) {
		$this->configuration['hook_' . $key] = $callback;
	}

	/*
	 * Old PHP4-compatible constructor
	 * Public
	 */
	function EzEdit() {
		$this->_init();
		// Retrieving javascript editor source code?
		if(isset($_GET['editor'])) {
			echo base64_decode($this->editor_code);
			exit;
		}
		// Retrieving toolbar image?
		if(isset($_GET['toolbar'])) {
			header('Content-Type: image/gif');
			echo base64_decode($this->toolbar_bin);
			exit;
		}
		// Attempting to rewrite a page?
		if(isset($_POST['q'])) {
			if(!isset($_POST['p'])) {
				die("No page name provided");
			}
			$file_name = call_user_func_array($this->configuration['hook_getfile'], array($_POST['p']));
			if(isset($_POST['b'])) {
				if(!isset($_POST['l'])) {
					die("No bit length provided");
				}
				call_user_func_array($this->configuration['hook_savefile'], array($file_name, $_POST['q'], $_POST['b'], $_POST['l']));
			}
			else {
				call_user_func_array($this->configuration['hook_savefile'], array($file_name, $_POST['q']));
			}
			echo "Updated $file_name";
			exit;
		}
		// Authenticating?
		if(isset($_POST['u']) && isset($_POST['p'])) {
			call_user_func_array($this->configuration['hook_authenticate'], array($_POST['u'], $_POST['p']));
			$_SESSION['_ez_sid'] = '298732897'; // TODO
			echo $_SESSION['_ez_sid'];
			exit;
		}
		// Retrieving something?
		if(isset($_POST['g'])) {
			switch($_POST['g']) {
				case 'sid':
					if(!empty($_SESSION['_ez_sid'])) {
						echo $_SESSION['_ez_sid'];
						exit;
					}
					die('*');
			}
		}
		// Doing something?
		if(isset($_POST['a'])) {
			switch($_POST['a']) {
				case 'logout':
					unset($_SESSION['_ez_sid']);
					exit;
			}
		}
	}

	/*
	 * Cleanup html code: remove own javascript, and code added by browser
	 * Private
	 */
	function _cleanup($html) {
		// Some browsers such as Chrome can misbehave a bit and inject their own code
		// before the <head> tag...
		$p = stripos($html, '<head>');
		if($p === false) {
			return $html;
		}
		$out = substr($html, $p);
		// That's not all: we also tend to add our own scripting stuff...
		$out = preg_replace('/<script.+?ezedit\.php\?editor.+?script>/i', '', $out);
		return $out;
	}

	/*
	 * Register local callbacks,
	 * then give any potential registered plugin a chance to override these callbacks
	 * Private
	 */
	function _register_plugin() {
		$this->register_hook('getfile', array($this, 'default_get_file'));
		$this->register_hook('savefile', array($this, 'default_save_file'));
		$this->register_hook('authenticate', array($this, 'default_authenticate'));

		if($this->configuration['plugin'] != null) {
			require $this->configuration['plugin'];
		}
	}

	/*
	 * Check for existence of a configuration file and retrieve its content
	 * Use said content to override default configuration
	 * Private
	 */
	function _read_configuration_file() {
		$fileName = 'ezedit.conf.html';
		if(!file_exists($fileName)) {
			return;
		}
		$conf = file($fileName, FILE_USE_INCLUDE_PATH | FILE_SKIP_EMPTY_LINES | FILE_IGNORE_NEW_LINES);
		foreach($conf as $ln => $line) {
			list($key, $value) = preg_split('/[\s]*[=][\s]*/', $line);
			$this->configuration[$key] = $value;
		}
	}

#########################################################
# Default plugin code...overriden by registered plugins #
#########################################################

	/*
	 * Default plugin call-back to extract file name from page name
	 */
	function default_get_file($pageName) {
		if(empty($pageName)) {
			$pageName = $this->configuration['index'];
		}
		return $this->configuration['path'] . $pageName;
	}

	/*
	 * Default plugin call-back to rewrite a file with new content
	 */
	function default_save_file($fileName, $content, $id = false, $oldLength = false) {
		if(!@is_writable($fileName)) {
			die("Sorry, $fileName is not writable");
		}
		if(false === $id) {
			// Write a whole page
			$html = "<html>\n" . $this->_cleanup($content) . "\n</html>";
			// TODO Grab doctype and save that as well
		}
		else {
			// Write a bit
			$html = @file_get_contents($fileName);
			if(!$html) {
				die("Sorry, unable to read $fileName");
			}
			$begin = strpos($html, 'id="' . $id . '"');
			if(!$begin) {
				$begin = strpos($html, "id='" . $id . "'");
			}
			if(!$begin) {
				die("Sorry, unable to find id $id in page $pageName");
			}
			$hlen = strlen($html);
			for($i=$begin; $i<$hlen; $i++) {
				if($html[$i] == '>') {
					$begin = $i;
					break;
				}
			}
			if($i == $hlen) {
				die("Sorry, unable to find end of element opening token");
			}
			$i ++;
			$html = substr($html, 0, $i) . $content . substr($html, $i + $oldLength);
		}
		$f = @fopen($fileName, 'w');
		if(!$f || !@fputs($f, $html)) {
			die("Sorry, unable to write $fileName");
		}
		@fclose($f);
	}

	/*
	 * Default plugin call-back to authenticate a user based on username + password
	 */
	function default_authenticate($username, $password) {
		if($this->configuration['password'] == 'password') {
			die("Sorry, you need to change your username and password in ezedit.php");
		}
		if($username != $this->configuration['username'] || $password != $this->configuration['password']) {
			die("Sorry, wrong credentials");
		}
	}

	/*
	 * Init function: check for config. file, register plugins, start session, store js code + assets
	 * Private
	 */
	function _init() {
		$this->_read_configuration_file();
		$this->_register_plugin();
		session_start();
######################################################
# Generated code goes below this line: do not modify #
######################################################
//
		$this->editor_code = <<<EOEC
LyogTmljRWRpdCAtIE1pY3JvIElubGluZSBXWVNJV1lHCiAqIENvcHlyaWdodCAyMDA3LTIwMDggQnJpYW4gS2lyY2hvZmYKICoKICogTmljRWRpdCBpcyBkaXN0cmlidXRlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIE1JVCBsaWNlbnNlCiAqIEZvciBtb3JlIGluZm9ybWF0aW9uIHZpc2l0IGh0dHA6Ly9uaWNlZGl0LmNvbS8KICogRG8gbm90IHJlbW92ZSB0aGlzIGNvcHlyaWdodCBtZXNzYWdlCiAqLw0KdmFyIGJrRXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIEE9YXJndW1lbnRzO2lmKEEubGVuZ3RoPT0xKXtBPVt0aGlzLEFbMF1dfWZvcih2YXIgQiBpbiBBWzFdKXtBWzBdW0JdPUFbMV1bQl19cmV0dXJuIEFbMF19O2Z1bmN0aW9uIGJrQ2xhc3MoKXt9YmtDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0PWZ1bmN0aW9uKCl7fTtia0NsYXNzLmV4dGVuZD1mdW5jdGlvbihDKXt2YXIgQT1mdW5jdGlvbigpe2lmKGFyZ3VtZW50c1swXSE9PWJrQ2xhc3Mpe3JldHVybiB0aGlzLmNvbnN0cnVjdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fTt2YXIgQj1uZXcgdGhpcyhia0NsYXNzKTtia0V4dGVuZChCLEMpO0EucHJvdG90eXBlPUI7QS5leHRlbmQ9dGhpcy5leHRlbmQ7cmV0dXJuIEF9O3ZhciBia0VsZW1lbnQ9YmtDbGFzcy5leHRlbmQoe2NvbnN0cnVjdDpmdW5jdGlvbihCLEEpe2lmKHR5cGVvZiAoQik9PSJzdHJpbmciKXtCPShBfHxkb2N1bWVudCkuY3JlYXRlRWxlbWVudChCKX1CPSRCSyhCKTtyZXR1cm4gQn0sYXBwZW5kVG86ZnVuY3Rpb24oQSl7QS5hcHBlbmRDaGlsZCh0aGlzKTtyZXR1cm4gdGhpc30sYXBwZW5kQmVmb3JlOmZ1bmN0aW9uKEEpe0EucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcyxBKTtyZXR1cm4gdGhpc30sYWRkRXZlbnQ6ZnVuY3Rpb24oQixBKXtia0xpYi5hZGRFdmVudCh0aGlzLEIsQSk7cmV0dXJuIHRoaXN9LHNldENvbnRlbnQ6ZnVuY3Rpb24oQSl7dGhpcy5pbm5lckhUTUw9QTtyZXR1cm4gdGhpc30scG9zOmZ1bmN0aW9uKCl7dmFyIEM9Y3VydG9wPTA7dmFyIEI9b2JqPXRoaXM7aWYob2JqLm9mZnNldFBhcmVudCl7ZG97Qys9b2JqLm9mZnNldExlZnQ7Y3VydG9wKz1vYmoub2Zmc2V0VG9wfXdoaWxlKG9iaj1vYmoub2Zmc2V0UGFyZW50KX12YXIgQT0oIXdpbmRvdy5vcGVyYSk/cGFyc2VJbnQodGhpcy5nZXRTdHlsZSgiYm9yZGVyLXdpZHRoIil8fHRoaXMuc3R5bGUuYm9yZGVyKXx8MDowO3JldHVybltDK0EsY3VydG9wK0ErdGhpcy5vZmZzZXRIZWlnaHRdfSxub1NlbGVjdDpmdW5jdGlvbigpe2JrTGliLm5vU2VsZWN0KHRoaXMpO3JldHVybiB0aGlzfSxwYXJlbnRUYWc6ZnVuY3Rpb24oQSl7dmFyIEI9dGhpcztkb3tpZihCJiZCLm5vZGVOYW1lJiZCLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCk9PUEpe3JldHVybiBCfUI9Qi5wYXJlbnROb2RlfXdoaWxlKEIpO3JldHVybiBmYWxzZX0saGFzQ2xhc3M6ZnVuY3Rpb24oQSl7cmV0dXJuIHRoaXMuY2xhc3NOYW1lLm1hdGNoKG5ldyBSZWdFeHAoIihcXHN8XiluaWNFZGl0LSIrQSsiKFxcc3wkKSIpKX0sYWRkQ2xhc3M6ZnVuY3Rpb24oQSl7aWYoIXRoaXMuaGFzQ2xhc3MoQSkpe3RoaXMuY2xhc3NOYW1lKz0iIG5pY0VkaXQtIitBfXJldHVybiB0aGlzfSxyZW1vdmVDbGFzczpmdW5jdGlvbihBKXtpZih0aGlzLmhhc0NsYXNzKEEpKXt0aGlzLmNsYXNzTmFtZT10aGlzLmNsYXNzTmFtZS5yZXBsYWNlKG5ldyBSZWdFeHAoIihcXHN8XiluaWNFZGl0LSIrQSsiKFxcc3wkKSIpLCIgIil9cmV0dXJuIHRoaXN9LHNldFN0eWxlOmZ1bmN0aW9uKEEpe3ZhciBCPXRoaXMuc3R5bGU7Zm9yKHZhciBDIGluIEEpe3N3aXRjaChDKXtjYXNlImZsb2F0IjpCLmNzc0Zsb2F0PUIuc3R5bGVGbG9hdD1BW0NdO2JyZWFrO2Nhc2Uib3BhY2l0eSI6Qi5vcGFjaXR5PUFbQ107Qi5maWx0ZXI9ImFscGhhKG9wYWNpdHk9IitNYXRoLnJvdW5kKEFbQ10qMTAwKSsiKSI7YnJlYWs7Y2FzZSJjbGFzc05hbWUiOnRoaXMuY2xhc3NOYW1lPUFbQ107YnJlYWs7ZGVmYXVsdDpCW0NdPUFbQ119fXJldHVybiB0aGlzfSxnZXRTdHlsZTpmdW5jdGlvbihBLEMpe3ZhciBCPSghQyk/ZG9jdW1lbnQuZGVmYXVsdFZpZXc6QztpZih0aGlzLm5vZGVUeXBlPT0xKXtyZXR1cm4oQiYmQi5nZXRDb21wdXRlZFN0eWxlKT9CLmdldENvbXB1dGVkU3R5bGUodGhpcyxudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKEEpOnRoaXMuY3VycmVudFN0eWxlW2JrTGliLmNhbWVsaXplKEEpXX19LHJlbW92ZTpmdW5jdGlvbigpe3RoaXMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzKTtyZXR1cm4gdGhpc30sc2V0QXR0cmlidXRlczpmdW5jdGlvbihBKXtmb3IodmFyIEIgaW4gQSl7dGhpc1tCXT1BW0JdfXJldHVybiB0aGlzfX0pO3ZhciBia0xpYj17aXNNU0lFOihuYXZpZ2F0b3IuYXBwVmVyc2lvbi5pbmRleE9mKCJNU0lFIikhPS0xKSxhZGRFdmVudDpmdW5jdGlvbihDLEIsQSl7KEMuYWRkRXZlbnRMaXN0ZW5lcik/Qy5hZGRFdmVudExpc3RlbmVyKEIsQSxmYWxzZSk6Qy5hdHRhY2hFdmVudCgib24iK0IsQSl9LHRvQXJyYXk6ZnVuY3Rpb24oQyl7dmFyIEI9Qy5sZW5ndGgsQT1uZXcgQXJyYXkoQik7d2hpbGUoQi0tKXtBW0JdPUNbQl19cmV0dXJuIEF9LG5vU2VsZWN0OmZ1bmN0aW9uKEIpe2lmKEIuc2V0QXR0cmlidXRlJiZCLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkhPSJpbnB1dCImJkIubm9kZU5hbWUudG9Mb3dlckNhc2UoKSE9InRleHRhcmVhIil7Qi5zZXRBdHRyaWJ1dGUoInVuc2VsZWN0YWJsZSIsIm9uIil9Zm9yKHZhciBBPTA7QTxCLmNoaWxkTm9kZXMubGVuZ3RoO0ErKyl7YmtMaWIubm9TZWxlY3QoQi5jaGlsZE5vZGVzW0FdKX19LGNhbWVsaXplOmZ1bmN0aW9uKEEpe3JldHVybiBBLnJlcGxhY2UoL1wtKC4pL2csZnVuY3Rpb24oQixDKXtyZXR1cm4gQy50b1VwcGVyQ2FzZSgpfSl9LGluQXJyYXk6ZnVuY3Rpb24oQSxCKXtyZXR1cm4oYmtMaWIuc2VhcmNoKEEsQikhPW51bGwpfSxzZWFyY2g6ZnVuY3Rpb24oQSxDKXtmb3IodmFyIEI9MDtCPEEubGVuZ3RoO0IrKyl7aWYoQVtCXT09Qyl7cmV0dXJuIEJ9fXJldHVybiBudWxsfSxjYW5jZWxFdmVudDpmdW5jdGlvbihBKXtBPUF8fHdpbmRvdy5ldmVudDtpZihBLnByZXZlbnREZWZhdWx0JiZBLnN0b3BQcm9wYWdhdGlvbil7QS5wcmV2ZW50RGVmYXVsdCgpO0Euc3RvcFByb3BhZ2F0aW9uKCl9cmV0dXJuIGZhbHNlfSxkb21Mb2FkOltdLGRvbUxvYWRlZDpmdW5jdGlvbigpe2lmKGFyZ3VtZW50cy5jYWxsZWUuZG9uZSl7cmV0dXJuIH1hcmd1bWVudHMuY2FsbGVlLmRvbmU9dHJ1ZTtmb3IoaT0wO2k8YmtMaWIuZG9tTG9hZC5sZW5ndGg7aSsrKXtia0xpYi5kb21Mb2FkW2ldKCl9fSxvbkRvbUxvYWRlZDpmdW5jdGlvbihBKXt0aGlzLmRvbUxvYWQucHVzaChBKTtpZihkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKXtkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixia0xpYi5kb21Mb2FkZWQsbnVsbCl9ZWxzZXtpZihia0xpYi5pc01TSUUpe2RvY3VtZW50LndyaXRlKCI8c3R5bGU+Lm5pY0VkaXQtbWFpbiBwIHsgbWFyZ2luOiAwOyB9PC9zdHlsZT48c2NyaXB0IGlkPV9faWVfb25sb2FkIGRlZmVyICIrKChsb2NhdGlvbi5wcm90b2NvbD09Imh0dHBzOiIpPyJzcmM9J2phdmFzY3JpcHQ6dm9pZCgwKSciOiJzcmM9Ly8wIikrIj48XC9zY3JpcHQ+Iik7JEJLKCJfX2llX29ubG9hZCIpLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2lmKHRoaXMucmVhZHlTdGF0ZT09ImNvbXBsZXRlIil7YmtMaWIuZG9tTG9hZGVkKCl9fX19d2luZG93Lm9ubG9hZD1ia0xpYi5kb21Mb2FkZWR9fTtmdW5jdGlvbiAkQksoQSl7aWYodHlwZW9mIChBKT09InN0cmluZyIpe0E9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoQSl9cmV0dXJuKEEmJiFBLmFwcGVuZFRvKT9ia0V4dGVuZChBLGJrRWxlbWVudC5wcm90b3R5cGUpOkF9dmFyIGJrRXZlbnQ9e2FkZEV2ZW50OmZ1bmN0aW9uKEEsQil7aWYoQil7dGhpcy5ldmVudExpc3Q9dGhpcy5ldmVudExpc3R8fHt9O3RoaXMuZXZlbnRMaXN0W0FdPXRoaXMuZXZlbnRMaXN0W0FdfHxbXTt0aGlzLmV2ZW50TGlzdFtBXS5wdXNoKEIpfXJldHVybiB0aGlzfSxmaXJlRXZlbnQ6ZnVuY3Rpb24oKXt2YXIgQT1ia0xpYi50b0FycmF5KGFyZ3VtZW50cyksQz1BLnNoaWZ0KCk7aWYodGhpcy5ldmVudExpc3QmJnRoaXMuZXZlbnRMaXN0W0NdKXtmb3IodmFyIEI9MDtCPHRoaXMuZXZlbnRMaXN0W0NdLmxlbmd0aDtCKyspe3RoaXMuZXZlbnRMaXN0W0NdW0JdLmFwcGx5KHRoaXMsQSl9fX19O2Z1bmN0aW9uIF9fKEEpe3JldHVybiBBfUZ1bmN0aW9uLnByb3RvdHlwZS5jbG9zdXJlPWZ1bmN0aW9uKCl7dmFyIEE9dGhpcyxCPWJrTGliLnRvQXJyYXkoYXJndW1lbnRzKSxDPUIuc2hpZnQoKTtyZXR1cm4gZnVuY3Rpb24oKXtpZih0eXBlb2YgKGJrTGliKSE9InVuZGVmaW5lZCIpe3JldHVybiBBLmFwcGx5KEMsQi5jb25jYXQoYmtMaWIudG9BcnJheShhcmd1bWVudHMpKSl9fX07RnVuY3Rpb24ucHJvdG90eXBlLmNsb3N1cmVMaXN0ZW5lcj1mdW5jdGlvbigpe3ZhciBBPXRoaXMsQz1ia0xpYi50b0FycmF5KGFyZ3VtZW50cyksQj1DLnNoaWZ0KCk7cmV0dXJuIGZ1bmN0aW9uKEUpe0U9RXx8d2luZG93LmV2ZW50O2lmKEUudGFyZ2V0KXt2YXIgRD1FLnRhcmdldH1lbHNle3ZhciBEPUUuc3JjRWxlbWVudH1yZXR1cm4gQS5hcHBseShCLFtFLERdLmNvbmNhdChDKSl9fTsNCgoKCnZhciBuaWNFZGl0b3JDb25maWcgPSBia0NsYXNzLmV4dGVuZCh7CglidXR0b25zIDogewoJCSdib2xkJyA6IHtuYW1lIDogX18oJ0NsaWNrIHRvIEJvbGQnKSwgY29tbWFuZCA6ICdCb2xkJywgdGFncyA6IFsnQicsJ1NUUk9ORyddLCBjc3MgOiB7J2ZvbnQtd2VpZ2h0JyA6ICdib2xkJ30sIGtleSA6ICdiJ30sCgkJJ2l0YWxpYycgOiB7bmFtZSA6IF9fKCdDbGljayB0byBJdGFsaWMnKSwgY29tbWFuZCA6ICdJdGFsaWMnLCB0YWdzIDogWydFTScsJ0knXSwgY3NzIDogeydmb250LXN0eWxlJyA6ICdpdGFsaWMnfSwga2V5IDogJ2knfSwKCQkndW5kZXJsaW5lJyA6IHtuYW1lIDogX18oJ0NsaWNrIHRvIFVuZGVybGluZScpLCBjb21tYW5kIDogJ1VuZGVybGluZScsIHRhZ3MgOiBbJ1UnXSwgY3NzIDogeyd0ZXh0LWRlY29yYXRpb24nIDogJ3VuZGVybGluZSd9LCBrZXkgOiAndSd9LAoJCSdsZWZ0JyA6IHtuYW1lIDogX18oJ0xlZnQgQWxpZ24nKSwgY29tbWFuZCA6ICdqdXN0aWZ5bGVmdCcsIG5vQWN0aXZlIDogdHJ1ZX0sCgkJJ2NlbnRlcicgOiB7bmFtZSA6IF9fKCdDZW50ZXIgQWxpZ24nKSwgY29tbWFuZCA6ICdqdXN0aWZ5Y2VudGVyJywgbm9BY3RpdmUgOiB0cnVlfSwKCQkncmlnaHQnIDoge25hbWUgOiBfXygnUmlnaHQgQWxpZ24nKSwgY29tbWFuZCA6ICdqdXN0aWZ5cmlnaHQnLCBub0FjdGl2ZSA6IHRydWV9LAoJCSdqdXN0aWZ5JyA6IHtuYW1lIDogX18oJ0p1c3RpZnkgQWxpZ24nKSwgY29tbWFuZCA6ICdqdXN0aWZ5ZnVsbCcsIG5vQWN0aXZlIDogdHJ1ZX0sCgkJJ29sJyA6IHtuYW1lIDogX18oJ0luc2VydCBPcmRlcmVkIExpc3QnKSwgY29tbWFuZCA6ICdpbnNlcnRvcmRlcmVkbGlzdCcsIHRhZ3MgOiBbJ09MJ119LAoJCSd1bCcgOiAJe25hbWUgOiBfXygnSW5zZXJ0IFVub3JkZXJlZCBMaXN0JyksIGNvbW1hbmQgOiAnaW5zZXJ0dW5vcmRlcmVkbGlzdCcsIHRhZ3MgOiBbJ1VMJ119LAoJCSdzdWJzY3JpcHQnIDoge25hbWUgOiBfXygnQ2xpY2sgdG8gU3Vic2NyaXB0JyksIGNvbW1hbmQgOiAnc3Vic2NyaXB0JywgdGFncyA6IFsnU1VCJ119LAoJCSdzdXBlcnNjcmlwdCcgOiB7bmFtZSA6IF9fKCdDbGljayB0byBTdXBlcnNjcmlwdCcpLCBjb21tYW5kIDogJ3N1cGVyc2NyaXB0JywgdGFncyA6IFsnU1VQJ119LAoJCSdzdHJpa2V0aHJvdWdoJyA6IHtuYW1lIDogX18oJ0NsaWNrIHRvIFN0cmlrZSBUaHJvdWdoJyksIGNvbW1hbmQgOiAnc3RyaWtlVGhyb3VnaCcsIGNzcyA6IHsndGV4dC1kZWNvcmF0aW9uJyA6ICdsaW5lLXRocm91Z2gnfX0sCgkJJ3JlbW92ZWZvcm1hdCcgOiB7bmFtZSA6IF9fKCdSZW1vdmUgRm9ybWF0dGluZycpLCBjb21tYW5kIDogJ3JlbW92ZWZvcm1hdCcsIG5vQWN0aXZlIDogdHJ1ZX0sCgkJJ2luZGVudCcgOiB7bmFtZSA6IF9fKCdJbmRlbnQgVGV4dCcpLCBjb21tYW5kIDogJ2luZGVudCcsIG5vQWN0aXZlIDogdHJ1ZX0sCgkJJ291dGRlbnQnIDoge25hbWUgOiBfXygnUmVtb3ZlIEluZGVudCcpLCBjb21tYW5kIDogJ291dGRlbnQnLCBub0FjdGl2ZSA6IHRydWV9LAoJCSdocicgOiB7bmFtZSA6IF9fKCdIb3Jpem9udGFsIFJ1bGUnKSwgY29tbWFuZCA6ICdpbnNlcnRIb3Jpem9udGFsUnVsZScsIG5vQWN0aXZlIDogdHJ1ZX0KCX0sCglpY29uc1BhdGggOiAnLi4vbmljRWRpdG9ySWNvbnMuZ2lmJywKCWJ1dHRvbkxpc3QgOiBbJ3NhdmUnLCdib2xkJywnaXRhbGljJywndW5kZXJsaW5lJywnbGVmdCcsJ2NlbnRlcicsJ3JpZ2h0JywnanVzdGlmeScsJ29sJywndWwnLCdmb250U2l6ZScsJ2ZvbnRGYW1pbHknLCdmb250Rm9ybWF0JywnaW5kZW50Jywnb3V0ZGVudCcsJ2ltYWdlJywndXBsb2FkJywnbGluaycsJ3VubGluaycsJ2ZvcmVjb2xvcicsJ2JnY29sb3InXSwKCWljb25MaXN0IDogeyJ4aHRtbCI6MSwiYmdjb2xvciI6MiwiZm9yZWNvbG9yIjozLCJib2xkIjo0LCJjZW50ZXIiOjUsImhyIjo2LCJpbmRlbnQiOjcsIml0YWxpYyI6OCwianVzdGlmeSI6OSwibGVmdCI6MTAsIm9sIjoxMSwib3V0ZGVudCI6MTIsInJlbW92ZWZvcm1hdCI6MTMsInJpZ2h0IjoxNCwic2F2ZSI6MjUsInN0cmlrZXRocm91Z2giOjE2LCJzdWJzY3JpcHQiOjE3LCJzdXBlcnNjcmlwdCI6MTgsInVsIjoxOSwidW5kZXJsaW5lIjoyMCwiaW1hZ2UiOjIxLCJsaW5rIjoyMiwidW5saW5rIjoyMywiY2xvc2UiOjI0LCJhcnJvdyI6MjYsInVwbG9hZCI6Mjd9CgkKfSk7CjsNCnZhciBuaWNFZGl0b3JzPXtuaWNQbHVnaW5zOltdLGVkaXRvcnM6W10scmVnaXN0ZXJQbHVnaW46ZnVuY3Rpb24oQixBKXt0aGlzLm5pY1BsdWdpbnMucHVzaCh7cDpCLG86QX0pfSxhbGxUZXh0QXJlYXM6ZnVuY3Rpb24oQyl7dmFyIEE9ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRleHRhcmVhIik7Zm9yKHZhciBCPTA7QjxBLmxlbmd0aDtCKyspe25pY0VkaXRvcnMuZWRpdG9ycy5wdXNoKG5ldyBuaWNFZGl0b3IoQykucGFuZWxJbnN0YW5jZShBW0JdKSl9cmV0dXJuIG5pY0VkaXRvcnMuZWRpdG9yc30sZmluZEVkaXRvcjpmdW5jdGlvbihDKXt2YXIgQj1uaWNFZGl0b3JzLmVkaXRvcnM7Zm9yKHZhciBBPTA7QTxCLmxlbmd0aDtBKyspe2lmKEJbQV0uaW5zdGFuY2VCeUlkKEMpKXtyZXR1cm4gQltBXS5pbnN0YW5jZUJ5SWQoQyl9fX19O3ZhciBuaWNFZGl0b3I9YmtDbGFzcy5leHRlbmQoe2NvbnN0cnVjdDpmdW5jdGlvbihDKXt0aGlzLm9wdGlvbnM9bmV3IG5pY0VkaXRvckNvbmZpZygpO2JrRXh0ZW5kKHRoaXMub3B0aW9ucyxDKTt0aGlzLm5pY0luc3RhbmNlcz1uZXcgQXJyYXkoKTt0aGlzLmxvYWRlZFBsdWdpbnM9bmV3IEFycmF5KCk7dmFyIEE9bmljRWRpdG9ycy5uaWNQbHVnaW5zO2Zvcih2YXIgQj0wO0I8QS5sZW5ndGg7QisrKXt0aGlzLmxvYWRlZFBsdWdpbnMucHVzaChuZXcgQVtCXS5wKHRoaXMsQVtCXS5vKSl9bmljRWRpdG9ycy5lZGl0b3JzLnB1c2godGhpcyk7YmtMaWIuYWRkRXZlbnQoZG9jdW1lbnQuYm9keSwibW91c2Vkb3duIix0aGlzLnNlbGVjdENoZWNrLmNsb3N1cmVMaXN0ZW5lcih0aGlzKSl9LHBhbmVsSW5zdGFuY2U6ZnVuY3Rpb24oQixDKXtCPXRoaXMuY2hlY2tSZXBsYWNlKCRCSyhCKSk7dmFyIEE9bmV3IGJrRWxlbWVudCgiRElWIikuc2V0U3R5bGUoe3dpZHRoOihwYXJzZUludChCLmdldFN0eWxlKCJ3aWR0aCIpKXx8Qi5jbGllbnRXaWR0aCkrInB4In0pLmFwcGVuZEJlZm9yZShCKTt0aGlzLnNldFBhbmVsKEEpO3JldHVybiB0aGlzLmFkZEluc3RhbmNlKEIsQyl9LGNoZWNrUmVwbGFjZTpmdW5jdGlvbihCKXt2YXIgQT1uaWNFZGl0b3JzLmZpbmRFZGl0b3IoQik7aWYoQSl7QS5yZW1vdmVJbnN0YW5jZShCKTtBLnJlbW92ZVBhbmVsKCl9cmV0dXJuIEJ9LGFkZEluc3RhbmNlOmZ1bmN0aW9uKEIsQyl7Qj10aGlzLmNoZWNrUmVwbGFjZSgkQksoQikpO2lmKEIuY29udGVudEVkaXRhYmxlfHwhIXdpbmRvdy5vcGVyYSl7dmFyIEE9bmV3IG5pY0VkaXRvckluc3RhbmNlKEIsQyx0aGlzKX1lbHNle3ZhciBBPW5ldyBuaWNFZGl0b3JJRnJhbWVJbnN0YW5jZShCLEMsdGhpcyl9dGhpcy5uaWNJbnN0YW5jZXMucHVzaChBKTtyZXR1cm4gdGhpc30scmVtb3ZlSW5zdGFuY2U6ZnVuY3Rpb24oQyl7Qz0kQksoQyk7dmFyIEI9dGhpcy5uaWNJbnN0YW5jZXM7Zm9yKHZhciBBPTA7QTxCLmxlbmd0aDtBKyspe2lmKEJbQV0uZT09Qyl7QltBXS5yZW1vdmUoKTt0aGlzLm5pY0luc3RhbmNlcy5zcGxpY2UoQSwxKX19fSxyZW1vdmVQYW5lbDpmdW5jdGlvbihBKXtpZih0aGlzLm5pY1BhbmVsKXt0aGlzLm5pY1BhbmVsLnJlbW92ZSgpO3RoaXMubmljUGFuZWw9bnVsbH19LGluc3RhbmNlQnlJZDpmdW5jdGlvbihDKXtDPSRCSyhDKTt2YXIgQj10aGlzLm5pY0luc3RhbmNlcztmb3IodmFyIEE9MDtBPEIubGVuZ3RoO0ErKyl7aWYoQltBXS5lPT1DKXtyZXR1cm4gQltBXX19fSxzZXRQYW5lbDpmdW5jdGlvbihBKXt0aGlzLm5pY1BhbmVsPW5ldyBuaWNFZGl0b3JQYW5lbCgkQksoQSksdGhpcy5vcHRpb25zLHRoaXMpO3RoaXMuZmlyZUV2ZW50KCJwYW5lbCIsdGhpcy5uaWNQYW5lbCk7cmV0dXJuIHRoaXN9LG5pY0NvbW1hbmQ6ZnVuY3Rpb24oQixBKXtpZih0aGlzLnNlbGVjdGVkSW5zdGFuY2Upe3RoaXMuc2VsZWN0ZWRJbnN0YW5jZS5uaWNDb21tYW5kKEIsQSl9fSxnZXRJY29uOmZ1bmN0aW9uKEQsQSl7dmFyIEM9dGhpcy5vcHRpb25zLmljb25MaXN0W0RdO3ZhciBCPShBLmljb25GaWxlcyk/QS5pY29uRmlsZXNbRF06IiI7cmV0dXJue2JhY2tncm91bmRJbWFnZToidXJsKCciKygoQyk/dGhpcy5vcHRpb25zLmljb25zUGF0aDpCKSsiJykiLGJhY2tncm91bmRQb3NpdGlvbjooKEMpPygoQy0xKSotMTgpOjApKyJweCAwcHgifX0sc2VsZWN0Q2hlY2s6ZnVuY3Rpb24oQyxBKXt2YXIgQj1mYWxzZTtkb3tpZihBLmNsYXNzTmFtZSYmQS5jbGFzc05hbWUuaW5kZXhPZigibmljRWRpdCIpIT0tMSl7cmV0dXJuIGZhbHNlfX13aGlsZShBPUEucGFyZW50Tm9kZSk7dGhpcy5maXJlRXZlbnQoImJsdXIiLHRoaXMuc2VsZWN0ZWRJbnN0YW5jZSxBKTt0aGlzLmxhc3RTZWxlY3RlZEluc3RhbmNlPXRoaXMuc2VsZWN0ZWRJbnN0YW5jZTt0aGlzLnNlbGVjdGVkSW5zdGFuY2U9bnVsbDtyZXR1cm4gZmFsc2V9fSk7bmljRWRpdG9yPW5pY0VkaXRvci5leHRlbmQoYmtFdmVudCk7DQp2YXIgbmljRWRpdG9ySW5zdGFuY2U9YmtDbGFzcy5leHRlbmQoe2lzU2VsZWN0ZWQ6ZmFsc2UsY29uc3RydWN0OmZ1bmN0aW9uKEcsRCxDKXt0aGlzLm5lPUM7dGhpcy5lbG09dGhpcy5lPUc7dGhpcy5vcHRpb25zPUR8fHt9O25ld1g9cGFyc2VJbnQoRy5nZXRTdHlsZSgid2lkdGgiKSl8fEcuY2xpZW50V2lkdGg7bmV3WT1wYXJzZUludChHLmdldFN0eWxlKCJoZWlnaHQiKSl8fEcuY2xpZW50SGVpZ2h0O3RoaXMuaW5pdGlhbEhlaWdodD1uZXdZLTg7dmFyIEg9KEcubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09InRleHRhcmVhIik7aWYoSHx8dGhpcy5vcHRpb25zLmhhc1BhbmVsKXt2YXIgQj0oYmtMaWIuaXNNU0lFJiYhKCh0eXBlb2YgZG9jdW1lbnQuYm9keS5zdHlsZS5tYXhIZWlnaHQhPSJ1bmRlZmluZWQiKSYmZG9jdW1lbnQuY29tcGF0TW9kZT09IkNTUzFDb21wYXQiKSk7dmFyIEU9e3dpZHRoOm5ld1grInB4Iixib3JkZXI6IjFweCBzb2xpZCAjY2NjIixib3JkZXJUb3A6MCxvdmVyZmxvd1k6ImF1dG8iLG92ZXJmbG93WDoiaGlkZGVuIn07RVsoQik/ImhlaWdodCI6Im1heEhlaWdodCJdPSh0aGlzLm5lLm9wdGlvbnMubWF4SGVpZ2h0KT90aGlzLm5lLm9wdGlvbnMubWF4SGVpZ2h0KyJweCI6bnVsbDt0aGlzLmVkaXRvckNvbnRhaW49bmV3IGJrRWxlbWVudCgiRElWIikuc2V0U3R5bGUoRSkuYXBwZW5kQmVmb3JlKEcpO3ZhciBBPW5ldyBia0VsZW1lbnQoIkRJViIpLnNldFN0eWxlKHt3aWR0aDoobmV3WC04KSsicHgiLG1hcmdpbjoiNHB4IixtaW5IZWlnaHQ6bmV3WSsicHgifSkuYWRkQ2xhc3MoIm1haW4iKS5hcHBlbmRUbyh0aGlzLmVkaXRvckNvbnRhaW4pO0cuc2V0U3R5bGUoe2Rpc3BsYXk6Im5vbmUifSk7QS5pbm5lckhUTUw9Ry5pbm5lckhUTUw7aWYoSCl7QS5zZXRDb250ZW50KEcudmFsdWUpO3RoaXMuY29weUVsbT1HO3ZhciBGPUcucGFyZW50VGFnKCJGT1JNIik7aWYoRil7YmtMaWIuYWRkRXZlbnQoRiwic3VibWl0Iix0aGlzLnNhdmVDb250ZW50LmNsb3N1cmUodGhpcykpfX1BLnNldFN0eWxlKChCKT97aGVpZ2h0Om5ld1krInB4In06e292ZXJmbG93OiJoaWRkZW4ifSk7dGhpcy5lbG09QX10aGlzLm5lLmFkZEV2ZW50KCJibHVyIix0aGlzLmJsdXIuY2xvc3VyZSh0aGlzKSk7dGhpcy5pbml0KCk7dGhpcy5ibHVyKCl9LGluaXQ6ZnVuY3Rpb24oKXt0aGlzLmVsbS5zZXRBdHRyaWJ1dGUoImNvbnRlbnRFZGl0YWJsZSIsInRydWUiKTtpZih0aGlzLmdldENvbnRlbnQoKT09IiIpe3RoaXMuc2V0Q29udGVudCgiPGJyIC8+Iil9dGhpcy5pbnN0YW5jZURvYz1kb2N1bWVudC5kZWZhdWx0Vmlldzt0aGlzLmVsbS5hZGRFdmVudCgibW91c2Vkb3duIix0aGlzLnNlbGVjdGVkLmNsb3N1cmVMaXN0ZW5lcih0aGlzKSkuYWRkRXZlbnQoImtleXByZXNzIix0aGlzLmtleURvd24uY2xvc3VyZUxpc3RlbmVyKHRoaXMpKS5hZGRFdmVudCgiZm9jdXMiLHRoaXMuc2VsZWN0ZWQuY2xvc3VyZSh0aGlzKSkuYWRkRXZlbnQoImJsdXIiLHRoaXMuYmx1ci5jbG9zdXJlKHRoaXMpKS5hZGRFdmVudCgia2V5dXAiLHRoaXMuc2VsZWN0ZWQuY2xvc3VyZSh0aGlzKSk7dGhpcy5uZS5maXJlRXZlbnQoImFkZCIsdGhpcyl9LHJlbW92ZTpmdW5jdGlvbigpe3RoaXMuc2F2ZUNvbnRlbnQoKTtpZih0aGlzLmNvcHlFbG18fHRoaXMub3B0aW9ucy5oYXNQYW5lbCl7dGhpcy5lZGl0b3JDb250YWluLnJlbW92ZSgpO3RoaXMuZS5zZXRTdHlsZSh7ZGlzcGxheToiYmxvY2sifSk7dGhpcy5uZS5yZW1vdmVQYW5lbCgpfXRoaXMuZGlzYWJsZSgpO3RoaXMubmUuZmlyZUV2ZW50KCJyZW1vdmUiLHRoaXMpfSxkaXNhYmxlOmZ1bmN0aW9uKCl7dGhpcy5lbG0uc2V0QXR0cmlidXRlKCJjb250ZW50RWRpdGFibGUiLCJmYWxzZSIpfSxnZXRTZWw6ZnVuY3Rpb24oKXtyZXR1cm4od2luZG93LmdldFNlbGVjdGlvbik/d2luZG93LmdldFNlbGVjdGlvbigpOmRvY3VtZW50LnNlbGVjdGlvbn0sZ2V0Um5nOmZ1bmN0aW9uKCl7dmFyIEE9dGhpcy5nZXRTZWwoKTtpZighQSl7cmV0dXJuIG51bGx9cmV0dXJuKEEucmFuZ2VDb3VudD4wKT9BLmdldFJhbmdlQXQoMCk6QS5jcmVhdGVSYW5nZSgpfSxzZWxSbmc6ZnVuY3Rpb24oQSxCKXtpZih3aW5kb3cuZ2V0U2VsZWN0aW9uKXtCLnJlbW92ZUFsbFJhbmdlcygpO0IuYWRkUmFuZ2UoQSl9ZWxzZXtBLnNlbGVjdCgpfX0sc2VsRWxtOmZ1bmN0aW9uKCl7dmFyIEM9dGhpcy5nZXRSbmcoKTtpZihDLnN0YXJ0Q29udGFpbmVyKXt2YXIgRD1DLnN0YXJ0Q29udGFpbmVyO2lmKEMuY2xvbmVDb250ZW50cygpLmNoaWxkTm9kZXMubGVuZ3RoPT0xKXtmb3IodmFyIEI9MDtCPEQuY2hpbGROb2Rlcy5sZW5ndGg7QisrKXt2YXIgQT1ELmNoaWxkTm9kZXNbQl0ub3duZXJEb2N1bWVudC5jcmVhdGVSYW5nZSgpO0Euc2VsZWN0Tm9kZShELmNoaWxkTm9kZXNbQl0pO2lmKEMuY29tcGFyZUJvdW5kYXJ5UG9pbnRzKFJhbmdlLlNUQVJUX1RPX1NUQVJULEEpIT0xJiZDLmNvbXBhcmVCb3VuZGFyeVBvaW50cyhSYW5nZS5FTkRfVE9fRU5ELEEpIT0tMSl7cmV0dXJuICRCSyhELmNoaWxkTm9kZXNbQl0pfX19cmV0dXJuICRCSyhEKX1lbHNle3JldHVybiAkQksoKHRoaXMuZ2V0U2VsKCkudHlwZT09IkNvbnRyb2wiKT9DLml0ZW0oMCk6Qy5wYXJlbnRFbGVtZW50KCkpfX0sc2F2ZVJuZzpmdW5jdGlvbigpe3RoaXMuc2F2ZWRSYW5nZT10aGlzLmdldFJuZygpO3RoaXMuc2F2ZWRTZWw9dGhpcy5nZXRTZWwoKX0scmVzdG9yZVJuZzpmdW5jdGlvbigpe2lmKHRoaXMuc2F2ZWRSYW5nZSl7dGhpcy5zZWxSbmcodGhpcy5zYXZlZFJhbmdlLHRoaXMuc2F2ZWRTZWwpfX0sa2V5RG93bjpmdW5jdGlvbihCLEEpe2lmKEIuY3RybEtleSl7dGhpcy5uZS5maXJlRXZlbnQoImtleSIsdGhpcyxCKX19LHNlbGVjdGVkOmZ1bmN0aW9uKEMsQSl7aWYoIUEpe0E9dGhpcy5zZWxFbG0oKX1pZighQy5jdHJsS2V5KXt2YXIgQj10aGlzLm5lLnNlbGVjdGVkSW5zdGFuY2U7aWYoQiE9dGhpcyl7aWYoQil7dGhpcy5uZS5maXJlRXZlbnQoImJsdXIiLEIsQSl9dGhpcy5uZS5zZWxlY3RlZEluc3RhbmNlPXRoaXM7dGhpcy5uZS5maXJlRXZlbnQoImZvY3VzIixCLEEpfXRoaXMubmUuZmlyZUV2ZW50KCJzZWxlY3RlZCIsQixBKTt0aGlzLmlzRm9jdXNlZD10cnVlO3RoaXMuZWxtLmFkZENsYXNzKCJzZWxlY3RlZCIpfXJldHVybiBmYWxzZX0sYmx1cjpmdW5jdGlvbigpe3RoaXMuaXNGb2N1c2VkPWZhbHNlO3RoaXMuZWxtLnJlbW92ZUNsYXNzKCJzZWxlY3RlZCIpfSxzYXZlQ29udGVudDpmdW5jdGlvbigpe2lmKHRoaXMuY29weUVsbXx8dGhpcy5vcHRpb25zLmhhc1BhbmVsKXt0aGlzLm5lLmZpcmVFdmVudCgic2F2ZSIsdGhpcyk7KHRoaXMuY29weUVsbSk/dGhpcy5jb3B5RWxtLnZhbHVlPXRoaXMuZ2V0Q29udGVudCgpOnRoaXMuZS5pbm5lckhUTUw9dGhpcy5nZXRDb250ZW50KCl9fSxnZXRFbG06ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbG19LGdldENvbnRlbnQ6ZnVuY3Rpb24oKXt0aGlzLmNvbnRlbnQ9dGhpcy5nZXRFbG0oKS5pbm5lckhUTUw7dGhpcy5uZS5maXJlRXZlbnQoImdldCIsdGhpcyk7cmV0dXJuIHRoaXMuY29udGVudH0sc2V0Q29udGVudDpmdW5jdGlvbihBKXt0aGlzLmNvbnRlbnQ9QTt0aGlzLm5lLmZpcmVFdmVudCgic2V0Iix0aGlzKTt0aGlzLmVsbS5pbm5lckhUTUw9dGhpcy5jb250ZW50fSxuaWNDb21tYW5kOmZ1bmN0aW9uKEIsQSl7ZG9jdW1lbnQuZXhlY0NvbW1hbmQoQixmYWxzZSxBKX19KTsNCnZhciBuaWNFZGl0b3JJRnJhbWVJbnN0YW5jZT1uaWNFZGl0b3JJbnN0YW5jZS5leHRlbmQoe3NhdmVkU3R5bGVzOltdLGluaXQ6ZnVuY3Rpb24oKXt2YXIgQj10aGlzLmVsbS5pbm5lckhUTUwucmVwbGFjZSgvXlxzK3xccyskL2csIiIpO3RoaXMuZWxtLmlubmVySFRNTD0iIjsoIUIpP0I9IjxiciAvPiI6Qjt0aGlzLmluaXRpYWxDb250ZW50PUI7dGhpcy5lbG1GcmFtZT1uZXcgYmtFbGVtZW50KCJpZnJhbWUiKS5zZXRBdHRyaWJ1dGVzKHtzcmM6ImphdmFzY3JpcHQ6OyIsZnJhbWVCb3JkZXI6MCxhbGxvd1RyYW5zcGFyZW5jeToidHJ1ZSIsc2Nyb2xsaW5nOiJubyJ9KS5zZXRTdHlsZSh7aGVpZ2h0OiIxMDBweCIsd2lkdGg6IjEwMCUifSkuYWRkQ2xhc3MoImZyYW1lIikuYXBwZW5kVG8odGhpcy5lbG0pO2lmKHRoaXMuY29weUVsbSl7dGhpcy5lbG1GcmFtZS5zZXRTdHlsZSh7d2lkdGg6KHRoaXMuZWxtLm9mZnNldFdpZHRoLTQpKyJweCJ9KX12YXIgQT1bImZvbnQtc2l6ZSIsImZvbnQtZmFtaWx5IiwiZm9udC13ZWlnaHQiLCJjb2xvciJdO2ZvcihpdG0gaW4gQSl7dGhpcy5zYXZlZFN0eWxlc1tia0xpYi5jYW1lbGl6ZShpdG0pXT10aGlzLmVsbS5nZXRTdHlsZShpdG0pfXNldFRpbWVvdXQodGhpcy5pbml0RnJhbWUuY2xvc3VyZSh0aGlzKSw1MCl9LGRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLmVsbS5pbm5lckhUTUw9dGhpcy5nZXRDb250ZW50KCl9LGluaXRGcmFtZTpmdW5jdGlvbigpe3ZhciBCPSRCSyh0aGlzLmVsbUZyYW1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQpO0IuZGVzaWduTW9kZT0ib24iO0Iub3BlbigpO3ZhciBBPXRoaXMubmUub3B0aW9ucy5leHRlcm5hbENTUztCLndyaXRlKCI8aHRtbD48aGVhZD4iKygoQSk/JzxsaW5rIGhyZWY9IicrQSsnIiByZWw9InN0eWxlc2hlZXQiIHR5cGU9InRleHQvY3NzIiAvPic6IiIpKyc8L2hlYWQ+PGJvZHkgaWQ9Im5pY0VkaXRDb250ZW50IiBzdHlsZT0ibWFyZ2luOiAwICFpbXBvcnRhbnQ7IGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7Ij4nK3RoaXMuaW5pdGlhbENvbnRlbnQrIjwvYm9keT48L2h0bWw+Iik7Qi5jbG9zZSgpO3RoaXMuZnJhbWVEb2M9Qjt0aGlzLmZyYW1lV2luPSRCSyh0aGlzLmVsbUZyYW1lLmNvbnRlbnRXaW5kb3cpO3RoaXMuZnJhbWVDb250ZW50PSRCSyh0aGlzLmZyYW1lV2luLmRvY3VtZW50LmJvZHkpLnNldFN0eWxlKHRoaXMuc2F2ZWRTdHlsZXMpO3RoaXMuaW5zdGFuY2VEb2M9dGhpcy5mcmFtZVdpbi5kb2N1bWVudC5kZWZhdWx0Vmlldzt0aGlzLmhlaWdodFVwZGF0ZSgpO3RoaXMuZnJhbWVEb2MuYWRkRXZlbnQoIm1vdXNlZG93biIsdGhpcy5zZWxlY3RlZC5jbG9zdXJlTGlzdGVuZXIodGhpcykpLmFkZEV2ZW50KCJrZXl1cCIsdGhpcy5oZWlnaHRVcGRhdGUuY2xvc3VyZUxpc3RlbmVyKHRoaXMpKS5hZGRFdmVudCgia2V5ZG93biIsdGhpcy5rZXlEb3duLmNsb3N1cmVMaXN0ZW5lcih0aGlzKSkuYWRkRXZlbnQoImtleXVwIix0aGlzLnNlbGVjdGVkLmNsb3N1cmUodGhpcykpO3RoaXMubmUuZmlyZUV2ZW50KCJhZGQiLHRoaXMpfSxnZXRFbG06ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mcmFtZUNvbnRlbnR9LHNldENvbnRlbnQ6ZnVuY3Rpb24oQSl7dGhpcy5jb250ZW50PUE7dGhpcy5uZS5maXJlRXZlbnQoInNldCIsdGhpcyk7dGhpcy5mcmFtZUNvbnRlbnQuaW5uZXJIVE1MPXRoaXMuY29udGVudDt0aGlzLmhlaWdodFVwZGF0ZSgpfSxnZXRTZWw6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5mcmFtZVdpbik/dGhpcy5mcmFtZVdpbi5nZXRTZWxlY3Rpb24oKTp0aGlzLmZyYW1lRG9jLnNlbGVjdGlvbn0saGVpZ2h0VXBkYXRlOmZ1bmN0aW9uKCl7dGhpcy5lbG1GcmFtZS5zdHlsZS5oZWlnaHQ9TWF0aC5tYXgodGhpcy5mcmFtZUNvbnRlbnQub2Zmc2V0SGVpZ2h0LHRoaXMuaW5pdGlhbEhlaWdodCkrInB4In0sbmljQ29tbWFuZDpmdW5jdGlvbihCLEEpe3RoaXMuZnJhbWVEb2MuZXhlY0NvbW1hbmQoQixmYWxzZSxBKTtzZXRUaW1lb3V0KHRoaXMuaGVpZ2h0VXBkYXRlLmNsb3N1cmUodGhpcyksMTAwKX19KTsNCnZhciBuaWNFZGl0b3JQYW5lbD1ia0NsYXNzLmV4dGVuZCh7Y29uc3RydWN0OmZ1bmN0aW9uKEUsQixBKXt0aGlzLmVsbT1FO3RoaXMub3B0aW9ucz1CO3RoaXMubmU9QTt0aGlzLnBhbmVsQnV0dG9ucz1uZXcgQXJyYXkoKTt0aGlzLmJ1dHRvbkxpc3Q9YmtFeHRlbmQoW10sdGhpcy5uZS5vcHRpb25zLmJ1dHRvbkxpc3QpO3RoaXMucGFuZWxDb250YWluPW5ldyBia0VsZW1lbnQoIkRJViIpLnNldFN0eWxlKHtvdmVyZmxvdzoiaGlkZGVuIix3aWR0aDoiMTAwJSIsYm9yZGVyOiIxcHggc29saWQgI2NjY2NjYyIsYmFja2dyb3VuZENvbG9yOiIjZWZlZmVmIn0pLmFkZENsYXNzKCJwYW5lbENvbnRhaW4iKTt0aGlzLnBhbmVsRWxtPW5ldyBia0VsZW1lbnQoIkRJViIpLnNldFN0eWxlKHttYXJnaW46IjJweCIsbWFyZ2luVG9wOiIwcHgiLHpvb206MSxvdmVyZmxvdzoiaGlkZGVuIn0pLmFkZENsYXNzKCJwYW5lbCIpLmFwcGVuZFRvKHRoaXMucGFuZWxDb250YWluKTt0aGlzLnBhbmVsQ29udGFpbi5hcHBlbmRUbyhFKTt2YXIgQz10aGlzLm5lLm9wdGlvbnM7dmFyIEQ9Qy5idXR0b25zO2ZvcihidXR0b24gaW4gRCl7dGhpcy5hZGRCdXR0b24oYnV0dG9uLEMsdHJ1ZSl9dGhpcy5yZW9yZGVyKCk7RS5ub1NlbGVjdCgpfSxhZGRCdXR0b246ZnVuY3Rpb24oYnV0dG9uTmFtZSxvcHRpb25zLG5vT3JkZXIpe3ZhciBidXR0b249b3B0aW9ucy5idXR0b25zW2J1dHRvbk5hbWVdO3ZhciB0eXBlPShidXR0b24udHlwZSk/ZXZhbCgiKHR5cGVvZigiK2J1dHRvbi50eXBlKycpID09ICJ1bmRlZmluZWQiKSA/IG51bGwgOiAnK2J1dHRvbi50eXBlKyI7Iik6bmljRWRpdG9yQnV0dG9uO3ZhciBoYXNCdXR0b249YmtMaWIuaW5BcnJheSh0aGlzLmJ1dHRvbkxpc3QsYnV0dG9uTmFtZSk7aWYodHlwZSYmKGhhc0J1dHRvbnx8dGhpcy5uZS5vcHRpb25zLmZ1bGxQYW5lbCkpe3RoaXMucGFuZWxCdXR0b25zLnB1c2gobmV3IHR5cGUodGhpcy5wYW5lbEVsbSxidXR0b25OYW1lLG9wdGlvbnMsdGhpcy5uZSkpO2lmKCFoYXNCdXR0b24pe3RoaXMuYnV0dG9uTGlzdC5wdXNoKGJ1dHRvbk5hbWUpfX19LGZpbmRCdXR0b246ZnVuY3Rpb24oQil7Zm9yKHZhciBBPTA7QTx0aGlzLnBhbmVsQnV0dG9ucy5sZW5ndGg7QSsrKXtpZih0aGlzLnBhbmVsQnV0dG9uc1tBXS5uYW1lPT1CKXtyZXR1cm4gdGhpcy5wYW5lbEJ1dHRvbnNbQV19fX0scmVvcmRlcjpmdW5jdGlvbigpe3ZhciBDPXRoaXMuYnV0dG9uTGlzdDtmb3IodmFyIEI9MDtCPEMubGVuZ3RoO0IrKyl7dmFyIEE9dGhpcy5maW5kQnV0dG9uKENbQl0pO2lmKEEpe3RoaXMucGFuZWxFbG0uYXBwZW5kQ2hpbGQoQS5tYXJnaW4pfX19LHJlbW92ZTpmdW5jdGlvbigpe3RoaXMuZWxtLnJlbW92ZSgpfX0pOw0KdmFyIG5pY0VkaXRvckJ1dHRvbj1ia0NsYXNzLmV4dGVuZCh7Y29uc3RydWN0OmZ1bmN0aW9uKEQsQSxDLEIpe3RoaXMub3B0aW9ucz1DLmJ1dHRvbnNbQV07dGhpcy5uYW1lPUE7dGhpcy5uZT1CO3RoaXMuZWxtPUQ7dGhpcy5tYXJnaW49bmV3IGJrRWxlbWVudCgiRElWIikuc2V0U3R5bGUoeyJmbG9hdCI6ImxlZnQiLG1hcmdpblRvcDoiMnB4In0pLmFwcGVuZFRvKEQpO3RoaXMuY29udGFpbj1uZXcgYmtFbGVtZW50KCJESVYiKS5zZXRTdHlsZSh7d2lkdGg6IjIwcHgiLGhlaWdodDoiMjBweCJ9KS5hZGRDbGFzcygiYnV0dG9uQ29udGFpbiIpLmFwcGVuZFRvKHRoaXMubWFyZ2luKTt0aGlzLmJvcmRlcj1uZXcgYmtFbGVtZW50KCJESVYiKS5zZXRTdHlsZSh7YmFja2dyb3VuZENvbG9yOiIjZWZlZmVmIixib3JkZXI6IjFweCBzb2xpZCAjZWZlZmVmIn0pLmFwcGVuZFRvKHRoaXMuY29udGFpbik7dGhpcy5idXR0b249bmV3IGJrRWxlbWVudCgiRElWIikuc2V0U3R5bGUoe3dpZHRoOiIxOHB4IixoZWlnaHQ6IjE4cHgiLG92ZXJmbG93OiJoaWRkZW4iLHpvb206MSxjdXJzb3I6InBvaW50ZXIifSkuYWRkQ2xhc3MoImJ1dHRvbiIpLnNldFN0eWxlKHRoaXMubmUuZ2V0SWNvbihBLEMpKS5hcHBlbmRUbyh0aGlzLmJvcmRlcik7dGhpcy5idXR0b24uYWRkRXZlbnQoIm1vdXNlb3ZlciIsdGhpcy5ob3Zlck9uLmNsb3N1cmUodGhpcykpLmFkZEV2ZW50KCJtb3VzZW91dCIsdGhpcy5ob3Zlck9mZi5jbG9zdXJlKHRoaXMpKS5hZGRFdmVudCgibW91c2Vkb3duIix0aGlzLm1vdXNlQ2xpY2suY2xvc3VyZSh0aGlzKSkubm9TZWxlY3QoKTtpZighd2luZG93Lm9wZXJhKXt0aGlzLmJ1dHRvbi5vbm1vdXNlZG93bj10aGlzLmJ1dHRvbi5vbmNsaWNrPWJrTGliLmNhbmNlbEV2ZW50fUIuYWRkRXZlbnQoInNlbGVjdGVkIix0aGlzLmVuYWJsZS5jbG9zdXJlKHRoaXMpKS5hZGRFdmVudCgiYmx1ciIsdGhpcy5kaXNhYmxlLmNsb3N1cmUodGhpcykpLmFkZEV2ZW50KCJrZXkiLHRoaXMua2V5LmNsb3N1cmUodGhpcykpO3RoaXMuZGlzYWJsZSgpO3RoaXMuaW5pdCgpfSxpbml0OmZ1bmN0aW9uKCl7fSxoaWRlOmZ1bmN0aW9uKCl7dGhpcy5jb250YWluLnNldFN0eWxlKHtkaXNwbGF5OiJub25lIn0pfSx1cGRhdGVTdGF0ZTpmdW5jdGlvbigpe2lmKHRoaXMuaXNEaXNhYmxlZCl7dGhpcy5zZXRCZygpfWVsc2V7aWYodGhpcy5pc0hvdmVyKXt0aGlzLnNldEJnKCJob3ZlciIpfWVsc2V7aWYodGhpcy5pc0FjdGl2ZSl7dGhpcy5zZXRCZygiYWN0aXZlIil9ZWxzZXt0aGlzLnNldEJnKCl9fX19LHNldEJnOmZ1bmN0aW9uKEEpe3N3aXRjaChBKXtjYXNlImhvdmVyIjp2YXIgQj17Ym9yZGVyOiIxcHggc29saWQgIzY2NiIsYmFja2dyb3VuZENvbG9yOiIjZGRkIn07YnJlYWs7Y2FzZSJhY3RpdmUiOnZhciBCPXtib3JkZXI6IjFweCBzb2xpZCAjNjY2IixiYWNrZ3JvdW5kQ29sb3I6IiNjY2MifTticmVhaztkZWZhdWx0OnZhciBCPXtib3JkZXI6IjFweCBzb2xpZCAjZWZlZmVmIixiYWNrZ3JvdW5kQ29sb3I6IiNlZmVmZWYifX10aGlzLmJvcmRlci5zZXRTdHlsZShCKS5hZGRDbGFzcygiYnV0dG9uLSIrQSl9LGNoZWNrTm9kZXM6ZnVuY3Rpb24oQSl7dmFyIEI9QTtkb3tpZih0aGlzLm9wdGlvbnMudGFncyYmYmtMaWIuaW5BcnJheSh0aGlzLm9wdGlvbnMudGFncyxCLm5vZGVOYW1lKSl7dGhpcy5hY3RpdmF0ZSgpO3JldHVybiB0cnVlfX13aGlsZShCPUIucGFyZW50Tm9kZSYmQi5jbGFzc05hbWUhPSJuaWNFZGl0Iik7Qj0kQksoQSk7d2hpbGUoQi5ub2RlVHlwZT09Myl7Qj0kQksoQi5wYXJlbnROb2RlKX1pZih0aGlzLm9wdGlvbnMuY3NzKXtmb3IoaXRtIGluIHRoaXMub3B0aW9ucy5jc3Mpe2lmKEIuZ2V0U3R5bGUoaXRtLHRoaXMubmUuc2VsZWN0ZWRJbnN0YW5jZS5pbnN0YW5jZURvYyk9PXRoaXMub3B0aW9ucy5jc3NbaXRtXSl7dGhpcy5hY3RpdmF0ZSgpO3JldHVybiB0cnVlfX19dGhpcy5kZWFjdGl2YXRlKCk7cmV0dXJuIGZhbHNlfSxhY3RpdmF0ZTpmdW5jdGlvbigpe2lmKCF0aGlzLmlzRGlzYWJsZWQpe3RoaXMuaXNBY3RpdmU9dHJ1ZTt0aGlzLnVwZGF0ZVN0YXRlKCk7dGhpcy5uZS5maXJlRXZlbnQoImJ1dHRvbkFjdGl2YXRlIix0aGlzKX19LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXt0aGlzLmlzQWN0aXZlPWZhbHNlO3RoaXMudXBkYXRlU3RhdGUoKTtpZighdGhpcy5pc0Rpc2FibGVkKXt0aGlzLm5lLmZpcmVFdmVudCgiYnV0dG9uRGVhY3RpdmF0ZSIsdGhpcyl9fSxlbmFibGU6ZnVuY3Rpb24oQSxCKXt0aGlzLmlzRGlzYWJsZWQ9ZmFsc2U7dGhpcy5jb250YWluLnNldFN0eWxlKHtvcGFjaXR5OjF9KS5hZGRDbGFzcygiYnV0dG9uRW5hYmxlZCIpO3RoaXMudXBkYXRlU3RhdGUoKTt0aGlzLmNoZWNrTm9kZXMoQil9LGRpc2FibGU6ZnVuY3Rpb24oQSxCKXt0aGlzLmlzRGlzYWJsZWQ9dHJ1ZTt0aGlzLmNvbnRhaW4uc2V0U3R5bGUoe29wYWNpdHk6MC42fSkucmVtb3ZlQ2xhc3MoImJ1dHRvbkVuYWJsZWQiKTt0aGlzLnVwZGF0ZVN0YXRlKCl9LHRvZ2dsZUFjdGl2ZTpmdW5jdGlvbigpeyh0aGlzLmlzQWN0aXZlKT90aGlzLmRlYWN0aXZhdGUoKTp0aGlzLmFjdGl2YXRlKCl9LGhvdmVyT246ZnVuY3Rpb24oKXtpZighdGhpcy5pc0Rpc2FibGVkKXt0aGlzLmlzSG92ZXI9dHJ1ZTt0aGlzLnVwZGF0ZVN0YXRlKCk7dGhpcy5uZS5maXJlRXZlbnQoImJ1dHRvbk92ZXIiLHRoaXMpfX0saG92ZXJPZmY6ZnVuY3Rpb24oKXt0aGlzLmlzSG92ZXI9ZmFsc2U7dGhpcy51cGRhdGVTdGF0ZSgpO3RoaXMubmUuZmlyZUV2ZW50KCJidXR0b25PdXQiLHRoaXMpfSxtb3VzZUNsaWNrOmZ1bmN0aW9uKCl7aWYodGhpcy5vcHRpb25zLmNvbW1hbmQpe3RoaXMubmUubmljQ29tbWFuZCh0aGlzLm9wdGlvbnMuY29tbWFuZCx0aGlzLm9wdGlvbnMuY29tbWFuZEFyZ3MpO2lmKCF0aGlzLm9wdGlvbnMubm9BY3RpdmUpe3RoaXMudG9nZ2xlQWN0aXZlKCl9fXRoaXMubmUuZmlyZUV2ZW50KCJidXR0b25DbGljayIsdGhpcyl9LGtleTpmdW5jdGlvbihBLEIpe2lmKHRoaXMub3B0aW9ucy5rZXkmJkIuY3RybEtleSYmU3RyaW5nLmZyb21DaGFyQ29kZShCLmtleUNvZGV8fEIuY2hhckNvZGUpLnRvTG93ZXJDYXNlKCk9PXRoaXMub3B0aW9ucy5rZXkpe3RoaXMubW91c2VDbGljaygpO2lmKEIucHJldmVudERlZmF1bHQpe0IucHJldmVudERlZmF1bHQoKX19fX0pOw0KdmFyIG5pY1BsdWdpbj1ia0NsYXNzLmV4dGVuZCh7Y29uc3RydWN0OmZ1bmN0aW9uKEIsQSl7dGhpcy5vcHRpb25zPUE7dGhpcy5uZT1CO3RoaXMubmUuYWRkRXZlbnQoInBhbmVsIix0aGlzLmxvYWRQYW5lbC5jbG9zdXJlKHRoaXMpKTt0aGlzLmluaXQoKX0sbG9hZFBhbmVsOmZ1bmN0aW9uKEMpe3ZhciBCPXRoaXMub3B0aW9ucy5idXR0b25zO2Zvcih2YXIgQSBpbiBCKXtDLmFkZEJ1dHRvbihBLHRoaXMub3B0aW9ucyl9Qy5yZW9yZGVyKCl9LGluaXQ6ZnVuY3Rpb24oKXt9fSk7DQoNCgp2YXIgbmljUGFuZU9wdGlvbnMgPSB7IH07Cgp2YXIgbmljRWRpdG9yUGFuZT1ia0NsYXNzLmV4dGVuZCh7Y29uc3RydWN0OmZ1bmN0aW9uKEQsQyxCLEEpe3RoaXMubmU9Qzt0aGlzLmVsbT1EO3RoaXMucG9zPUQucG9zKCk7dGhpcy5jb250YWluPW5ldyBia0VsZW1lbnQoImRpdiIpLnNldFN0eWxlKHt6SW5kZXg6Ijk5OTk5IixvdmVyZmxvdzoiaGlkZGVuIixwb3NpdGlvbjoiYWJzb2x1dGUiLGxlZnQ6dGhpcy5wb3NbMF0rInB4Iix0b3A6dGhpcy5wb3NbMV0rInB4In0pO3RoaXMucGFuZT1uZXcgYmtFbGVtZW50KCJkaXYiKS5zZXRTdHlsZSh7Zm9udFNpemU6IjEycHgiLGJvcmRlcjoiMXB4IHNvbGlkICNjY2MiLG92ZXJmbG93OiJoaWRkZW4iLHBhZGRpbmc6IjRweCIsdGV4dEFsaWduOiJsZWZ0IixiYWNrZ3JvdW5kQ29sb3I6IiNmZmZmYzkifSkuYWRkQ2xhc3MoInBhbmUiKS5zZXRTdHlsZShCKS5hcHBlbmRUbyh0aGlzLmNvbnRhaW4pO2lmKEEmJiFBLm9wdGlvbnMubm9DbG9zZSl7dGhpcy5jbG9zZT1uZXcgYmtFbGVtZW50KCJkaXYiKS5zZXRTdHlsZSh7ImZsb2F0IjoicmlnaHQiLGhlaWdodDoiMTZweCIsd2lkdGg6IjE2cHgiLGN1cnNvcjoicG9pbnRlciJ9KS5zZXRTdHlsZSh0aGlzLm5lLmdldEljb24oImNsb3NlIixuaWNQYW5lT3B0aW9ucykpLmFkZEV2ZW50KCJtb3VzZWRvd24iLEEucmVtb3ZlUGFuZS5jbG9zdXJlKHRoaXMpKS5hcHBlbmRUbyh0aGlzLnBhbmUpfXRoaXMuY29udGFpbi5ub1NlbGVjdCgpLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpO3RoaXMucG9zaXRpb24oKTt0aGlzLmluaXQoKX0saW5pdDpmdW5jdGlvbigpe30scG9zaXRpb246ZnVuY3Rpb24oKXtpZih0aGlzLm5lLm5pY1BhbmVsKXt2YXIgQj10aGlzLm5lLm5pY1BhbmVsLmVsbTt2YXIgQT1CLnBvcygpO3ZhciBDPUFbMF0rcGFyc2VJbnQoQi5nZXRTdHlsZSgid2lkdGgiKSktKHBhcnNlSW50KHRoaXMucGFuZS5nZXRTdHlsZSgid2lkdGgiKSkrOCk7aWYoQzx0aGlzLnBvc1swXSl7dGhpcy5jb250YWluLnNldFN0eWxlKHtsZWZ0OkMrInB4In0pfX19LHRvZ2dsZTpmdW5jdGlvbigpe3RoaXMuaXNWaXNpYmxlPSF0aGlzLmlzVmlzaWJsZTt0aGlzLmNvbnRhaW4uc2V0U3R5bGUoe2Rpc3BsYXk6KCh0aGlzLmlzVmlzaWJsZSk/ImJsb2NrIjoibm9uZSIpfSl9LHJlbW92ZTpmdW5jdGlvbigpe2lmKHRoaXMuY29udGFpbil7dGhpcy5jb250YWluLnJlbW92ZSgpO3RoaXMuY29udGFpbj1udWxsfX0sYXBwZW5kOmZ1bmN0aW9uKEEpe0EuYXBwZW5kVG8odGhpcy5wYW5lKX0sc2V0Q29udGVudDpmdW5jdGlvbihBKXt0aGlzLnBhbmUuc2V0Q29udGVudChBKX19KTsNCg0KdmFyIG5pY0VkaXRvckFkdmFuY2VkQnV0dG9uPW5pY0VkaXRvckJ1dHRvbi5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oKXt0aGlzLm5lLmFkZEV2ZW50KCJzZWxlY3RlZCIsdGhpcy5yZW1vdmVQYW5lLmNsb3N1cmUodGhpcykpLmFkZEV2ZW50KCJibHVyIix0aGlzLnJlbW92ZVBhbmUuY2xvc3VyZSh0aGlzKSl9LG1vdXNlQ2xpY2s6ZnVuY3Rpb24oKXtpZighdGhpcy5pc0Rpc2FibGVkKXtpZih0aGlzLnBhbmUmJnRoaXMucGFuZS5wYW5lKXt0aGlzLnJlbW92ZVBhbmUoKX1lbHNle3RoaXMucGFuZT1uZXcgbmljRWRpdG9yUGFuZSh0aGlzLmNvbnRhaW4sdGhpcy5uZSx7d2lkdGg6KHRoaXMud2lkdGh8fCIyNzBweCIpLGJhY2tncm91bmRDb2xvcjoiI2ZmZiJ9LHRoaXMpO3RoaXMuYWRkUGFuZSgpO3RoaXMubmUuc2VsZWN0ZWRJbnN0YW5jZS5zYXZlUm5nKCl9fX0sYWRkRm9ybTpmdW5jdGlvbihDLEcpe3RoaXMuZm9ybT1uZXcgYmtFbGVtZW50KCJmb3JtIikuYWRkRXZlbnQoInN1Ym1pdCIsdGhpcy5zdWJtaXQuY2xvc3VyZUxpc3RlbmVyKHRoaXMpKTt0aGlzLnBhbmUuYXBwZW5kKHRoaXMuZm9ybSk7dGhpcy5pbnB1dHM9e307Zm9yKGl0bSBpbiBDKXt2YXIgRD1DW2l0bV07dmFyIEY9IiI7aWYoRyl7Rj1HLmdldEF0dHJpYnV0ZShpdG0pfWlmKCFGKXtGPUQudmFsdWV8fCIifXZhciBBPUNbaXRtXS50eXBlO2lmKEE9PSJ0aXRsZSIpe25ldyBia0VsZW1lbnQoImRpdiIpLnNldENvbnRlbnQoRC50eHQpLnNldFN0eWxlKHtmb250U2l6ZToiMTRweCIsZm9udFdlaWdodDoiYm9sZCIscGFkZGluZzoiMHB4IixtYXJnaW46IjJweCAwIn0pLmFwcGVuZFRvKHRoaXMuZm9ybSl9ZWxzZXt2YXIgQj1uZXcgYmtFbGVtZW50KCJkaXYiKS5zZXRTdHlsZSh7b3ZlcmZsb3c6ImhpZGRlbiIsY2xlYXI6ImJvdGgifSkuYXBwZW5kVG8odGhpcy5mb3JtKTtpZihELnR4dCl7bmV3IGJrRWxlbWVudCgibGFiZWwiKS5zZXRBdHRyaWJ1dGVzKHsiZm9yIjppdG19KS5zZXRDb250ZW50KEQudHh0KS5zZXRTdHlsZSh7bWFyZ2luOiIycHggNHB4Iixmb250U2l6ZToiMTNweCIsd2lkdGg6IjUwcHgiLGxpbmVIZWlnaHQ6IjIwcHgiLHRleHRBbGlnbjoicmlnaHQiLCJmbG9hdCI6ImxlZnQifSkuYXBwZW5kVG8oQil9c3dpdGNoKEEpe2Nhc2UidGV4dCI6dGhpcy5pbnB1dHNbaXRtXT1uZXcgYmtFbGVtZW50KCJpbnB1dCIpLnNldEF0dHJpYnV0ZXMoe2lkOml0bSx2YWx1ZTpGLHR5cGU6InRleHQifSkuc2V0U3R5bGUoe21hcmdpbjoiMnB4IDAiLGZvbnRTaXplOiIxM3B4IiwiZmxvYXQiOiJsZWZ0IixoZWlnaHQ6IjIwcHgiLGJvcmRlcjoiMXB4IHNvbGlkICNjY2MiLG92ZXJmbG93OiJoaWRkZW4ifSkuc2V0U3R5bGUoRC5zdHlsZSkuYXBwZW5kVG8oQik7YnJlYWs7Y2FzZSJzZWxlY3QiOnRoaXMuaW5wdXRzW2l0bV09bmV3IGJrRWxlbWVudCgic2VsZWN0Iikuc2V0QXR0cmlidXRlcyh7aWQ6aXRtfSkuc2V0U3R5bGUoe2JvcmRlcjoiMXB4IHNvbGlkICNjY2MiLCJmbG9hdCI6ImxlZnQiLG1hcmdpbjoiMnB4IDAifSkuYXBwZW5kVG8oQik7Zm9yKG9wdCBpbiBELm9wdGlvbnMpe3ZhciBFPW5ldyBia0VsZW1lbnQoIm9wdGlvbiIpLnNldEF0dHJpYnV0ZXMoe3ZhbHVlOm9wdCxzZWxlY3RlZDoob3B0PT1GKT8ic2VsZWN0ZWQiOiIifSkuc2V0Q29udGVudChELm9wdGlvbnNbb3B0XSkuYXBwZW5kVG8odGhpcy5pbnB1dHNbaXRtXSl9YnJlYWs7Y2FzZSJjb250ZW50Ijp0aGlzLmlucHV0c1tpdG1dPW5ldyBia0VsZW1lbnQoInRleHRhcmVhIikuc2V0QXR0cmlidXRlcyh7aWQ6aXRtfSkuc2V0U3R5bGUoe2JvcmRlcjoiMXB4IHNvbGlkICNjY2MiLCJmbG9hdCI6ImxlZnQifSkuc2V0U3R5bGUoRC5zdHlsZSkuYXBwZW5kVG8oQik7dGhpcy5pbnB1dHNbaXRtXS52YWx1ZT1GfX19bmV3IGJrRWxlbWVudCgiaW5wdXQiKS5zZXRBdHRyaWJ1dGVzKHt0eXBlOiJzdWJtaXQifSkuc2V0U3R5bGUoe2JhY2tncm91bmRDb2xvcjoiI2VmZWZlZiIsYm9yZGVyOiIxcHggc29saWQgI2NjYyIsbWFyZ2luOiIzcHggMCIsImZsb2F0IjoibGVmdCIsY2xlYXI6ImJvdGgifSkuYXBwZW5kVG8odGhpcy5mb3JtKTt0aGlzLmZvcm0ub25zdWJtaXQ9YmtMaWIuY2FuY2VsRXZlbnR9LHN1Ym1pdDpmdW5jdGlvbigpe30sZmluZEVsbTpmdW5jdGlvbihCLEEsRSl7dmFyIEQ9dGhpcy5uZS5zZWxlY3RlZEluc3RhbmNlLmdldEVsbSgpLmdldEVsZW1lbnRzQnlUYWdOYW1lKEIpO2Zvcih2YXIgQz0wO0M8RC5sZW5ndGg7QysrKXtpZihEW0NdLmdldEF0dHJpYnV0ZShBKT09RSl7cmV0dXJuICRCSyhEW0NdKX19fSxyZW1vdmVQYW5lOmZ1bmN0aW9uKCl7aWYodGhpcy5wYW5lKXt0aGlzLnBhbmUucmVtb3ZlKCk7dGhpcy5wYW5lPW51bGw7dGhpcy5uZS5zZWxlY3RlZEluc3RhbmNlLnJlc3RvcmVSbmcoKX19fSk7DQoNCnZhciBuaWNCdXR0b25UaXBzPWJrQ2xhc3MuZXh0ZW5kKHtjb25zdHJ1Y3Q6ZnVuY3Rpb24oQSl7dGhpcy5uZT1BO0EuYWRkRXZlbnQoImJ1dHRvbk92ZXIiLHRoaXMuc2hvdy5jbG9zdXJlKHRoaXMpKS5hZGRFdmVudCgiYnV0dG9uT3V0Iix0aGlzLmhpZGUuY2xvc3VyZSh0aGlzKSl9LHNob3c6ZnVuY3Rpb24oQSl7dGhpcy50aW1lcj1zZXRUaW1lb3V0KHRoaXMuY3JlYXRlLmNsb3N1cmUodGhpcyxBKSw0MDApfSxjcmVhdGU6ZnVuY3Rpb24oQSl7dGhpcy50aW1lcj1udWxsO2lmKCF0aGlzLnBhbmUpe3RoaXMucGFuZT1uZXcgbmljRWRpdG9yUGFuZShBLmJ1dHRvbix0aGlzLm5lLHtmb250U2l6ZToiMTJweCIsbWFyZ2luVG9wOiI1cHgifSk7dGhpcy5wYW5lLnNldENvbnRlbnQoQS5vcHRpb25zLm5hbWUpfX0saGlkZTpmdW5jdGlvbihBKXtpZih0aGlzLnRpbWVyKXtjbGVhclRpbWVvdXQodGhpcy50aW1lcil9aWYodGhpcy5wYW5lKXt0aGlzLnBhbmU9dGhpcy5wYW5lLnJlbW92ZSgpfX19KTtuaWNFZGl0b3JzLnJlZ2lzdGVyUGx1Z2luKG5pY0J1dHRvblRpcHMpOw0KDQoKdmFyIG5pY1NlbGVjdE9wdGlvbnMgPSB7CglidXR0b25zIDogewoJCSdmb250U2l6ZScgOiB7bmFtZSA6IF9fKCdTZWxlY3QgRm9udCBTaXplJyksIHR5cGUgOiAnbmljRWRpdG9yRm9udFNpemVTZWxlY3QnLCBjb21tYW5kIDogJ2ZvbnRzaXplJ30sCgkJJ2ZvbnRGYW1pbHknIDoge25hbWUgOiBfXygnU2VsZWN0IEZvbnQgRmFtaWx5JyksIHR5cGUgOiAnbmljRWRpdG9yRm9udEZhbWlseVNlbGVjdCcsIGNvbW1hbmQgOiAnZm9udG5hbWUnfSwKCQknZm9udEZvcm1hdCcgOiB7bmFtZSA6IF9fKCdTZWxlY3QgRm9udCBGb3JtYXQnKSwgdHlwZSA6ICduaWNFZGl0b3JGb250Rm9ybWF0U2VsZWN0JywgY29tbWFuZCA6ICdmb3JtYXRCbG9jayd9Cgl9Cn07Cgp2YXIgbmljRWRpdG9yU2VsZWN0PWJrQ2xhc3MuZXh0ZW5kKHtjb25zdHJ1Y3Q6ZnVuY3Rpb24oRCxBLEMsQil7dGhpcy5vcHRpb25zPUMuYnV0dG9uc1tBXTt0aGlzLmVsbT1EO3RoaXMubmU9Qjt0aGlzLm5hbWU9QTt0aGlzLnNlbE9wdGlvbnM9bmV3IEFycmF5KCk7dGhpcy5tYXJnaW49bmV3IGJrRWxlbWVudCgiZGl2Iikuc2V0U3R5bGUoeyJmbG9hdCI6ImxlZnQiLG1hcmdpbjoiMnB4IDFweCAwIDFweCJ9KS5hcHBlbmRUbyh0aGlzLmVsbSk7dGhpcy5jb250YWluPW5ldyBia0VsZW1lbnQoImRpdiIpLnNldFN0eWxlKHt3aWR0aDoiOTBweCIsaGVpZ2h0OiIyMHB4IixjdXJzb3I6InBvaW50ZXIiLG92ZXJmbG93OiJoaWRkZW4ifSkuYWRkQ2xhc3MoInNlbGVjdENvbnRhaW4iKS5hZGRFdmVudCgiY2xpY2siLHRoaXMudG9nZ2xlLmNsb3N1cmUodGhpcykpLmFwcGVuZFRvKHRoaXMubWFyZ2luKTt0aGlzLml0ZW1zPW5ldyBia0VsZW1lbnQoImRpdiIpLnNldFN0eWxlKHtvdmVyZmxvdzoiaGlkZGVuIix6b29tOjEsYm9yZGVyOiIxcHggc29saWQgI2NjYyIscGFkZGluZ0xlZnQ6IjNweCIsYmFja2dyb3VuZENvbG9yOiIjZmZmIn0pLmFwcGVuZFRvKHRoaXMuY29udGFpbik7dGhpcy5jb250cm9sPW5ldyBia0VsZW1lbnQoImRpdiIpLnNldFN0eWxlKHtvdmVyZmxvdzoiaGlkZGVuIiwiZmxvYXQiOiJyaWdodCIsaGVpZ2h0OiIxOHB4Iix3aWR0aDoiMTZweCJ9KS5hZGRDbGFzcygic2VsZWN0Q29udHJvbCIpLnNldFN0eWxlKHRoaXMubmUuZ2V0SWNvbigiYXJyb3ciLEMpKS5hcHBlbmRUbyh0aGlzLml0ZW1zKTt0aGlzLnR4dD1uZXcgYmtFbGVtZW50KCJkaXYiKS5zZXRTdHlsZSh7b3ZlcmZsb3c6ImhpZGRlbiIsImZsb2F0IjoibGVmdCIsd2lkdGg6IjY2cHgiLGhlaWdodDoiMTRweCIsbWFyZ2luVG9wOiIxcHgiLGZvbnRGYW1pbHk6InNhbnMtc2VyaWYiLHRleHRBbGlnbjoiY2VudGVyIixmb250U2l6ZToiMTJweCJ9KS5hZGRDbGFzcygic2VsZWN0VHh0IikuYXBwZW5kVG8odGhpcy5pdGVtcyk7aWYoIXdpbmRvdy5vcGVyYSl7dGhpcy5jb250YWluLm9ubW91c2Vkb3duPXRoaXMuY29udHJvbC5vbm1vdXNlZG93bj10aGlzLnR4dC5vbm1vdXNlZG93bj1ia0xpYi5jYW5jZWxFdmVudH10aGlzLm1hcmdpbi5ub1NlbGVjdCgpO3RoaXMubmUuYWRkRXZlbnQoInNlbGVjdGVkIix0aGlzLmVuYWJsZS5jbG9zdXJlKHRoaXMpKS5hZGRFdmVudCgiYmx1ciIsdGhpcy5kaXNhYmxlLmNsb3N1cmUodGhpcykpO3RoaXMuZGlzYWJsZSgpO3RoaXMuaW5pdCgpfSxkaXNhYmxlOmZ1bmN0aW9uKCl7dGhpcy5pc0Rpc2FibGVkPXRydWU7dGhpcy5jbG9zZSgpO3RoaXMuY29udGFpbi5zZXRTdHlsZSh7b3BhY2l0eTowLjZ9KX0sZW5hYmxlOmZ1bmN0aW9uKEEpe3RoaXMuaXNEaXNhYmxlZD1mYWxzZTt0aGlzLmNsb3NlKCk7dGhpcy5jb250YWluLnNldFN0eWxlKHtvcGFjaXR5OjF9KX0sc2V0RGlzcGxheTpmdW5jdGlvbihBKXt0aGlzLnR4dC5zZXRDb250ZW50KEEpfSx0b2dnbGU6ZnVuY3Rpb24oKXtpZighdGhpcy5pc0Rpc2FibGVkKXsodGhpcy5wYW5lKT90aGlzLmNsb3NlKCk6dGhpcy5vcGVuKCl9fSxvcGVuOmZ1bmN0aW9uKCl7dGhpcy5wYW5lPW5ldyBuaWNFZGl0b3JQYW5lKHRoaXMuaXRlbXMsdGhpcy5uZSx7d2lkdGg6Ijg4cHgiLHBhZGRpbmc6IjBweCIsYm9yZGVyVG9wOjAsYm9yZGVyTGVmdDoiMXB4IHNvbGlkICNjY2MiLGJvcmRlclJpZ2h0OiIxcHggc29saWQgI2NjYyIsYm9yZGVyQm90dG9tOiIwcHgiLGJhY2tncm91bmRDb2xvcjoiI2ZmZiJ9KTtmb3IodmFyIEM9MDtDPHRoaXMuc2VsT3B0aW9ucy5sZW5ndGg7QysrKXt2YXIgQj10aGlzLnNlbE9wdGlvbnNbQ107dmFyIEE9bmV3IGJrRWxlbWVudCgiZGl2Iikuc2V0U3R5bGUoe292ZXJmbG93OiJoaWRkZW4iLGJvcmRlckJvdHRvbToiMXB4IHNvbGlkICNjY2MiLHdpZHRoOiI4OHB4Iix0ZXh0QWxpZ246ImxlZnQiLG92ZXJmbG93OiJoaWRkZW4iLGN1cnNvcjoicG9pbnRlciJ9KTt2YXIgRD1uZXcgYmtFbGVtZW50KCJkaXYiKS5zZXRTdHlsZSh7cGFkZGluZzoiMHB4IDRweCJ9KS5zZXRDb250ZW50KEJbMV0pLmFwcGVuZFRvKEEpLm5vU2VsZWN0KCk7RC5hZGRFdmVudCgiY2xpY2siLHRoaXMudXBkYXRlLmNsb3N1cmUodGhpcyxCWzBdKSkuYWRkRXZlbnQoIm1vdXNlb3ZlciIsdGhpcy5vdmVyLmNsb3N1cmUodGhpcyxEKSkuYWRkRXZlbnQoIm1vdXNlb3V0Iix0aGlzLm91dC5jbG9zdXJlKHRoaXMsRCkpLnNldEF0dHJpYnV0ZXMoImlkIixCWzBdKTt0aGlzLnBhbmUuYXBwZW5kKEEpO2lmKCF3aW5kb3cub3BlcmEpe0Qub25tb3VzZWRvd249YmtMaWIuY2FuY2VsRXZlbnR9fX0sY2xvc2U6ZnVuY3Rpb24oKXtpZih0aGlzLnBhbmUpe3RoaXMucGFuZT10aGlzLnBhbmUucmVtb3ZlKCl9fSxvdmVyOmZ1bmN0aW9uKEEpe0Euc2V0U3R5bGUoe2JhY2tncm91bmRDb2xvcjoiI2NjYyJ9KX0sb3V0OmZ1bmN0aW9uKEEpe0Euc2V0U3R5bGUoe2JhY2tncm91bmRDb2xvcjoiI2ZmZiJ9KX0sYWRkOmZ1bmN0aW9uKEIsQSl7dGhpcy5zZWxPcHRpb25zLnB1c2gobmV3IEFycmF5KEIsQSkpfSx1cGRhdGU6ZnVuY3Rpb24oQSl7dGhpcy5uZS5uaWNDb21tYW5kKHRoaXMub3B0aW9ucy5jb21tYW5kLEEpO3RoaXMuY2xvc2UoKX19KTt2YXIgbmljRWRpdG9yRm9udFNpemVTZWxlY3Q9bmljRWRpdG9yU2VsZWN0LmV4dGVuZCh7c2VsOnsxOiIxJm5ic3A7KDhwdCkiLDI6IjImbmJzcDsoMTBwdCkiLDM6IjMmbmJzcDsoMTJwdCkiLDQ6IjQmbmJzcDsoMTRwdCkiLDU6IjUmbmJzcDsoMThwdCkiLDY6IjYmbmJzcDsoMjRwdCkifSxpbml0OmZ1bmN0aW9uKCl7dGhpcy5zZXREaXNwbGF5KCJGb250Jm5ic3A7U2l6ZS4uLiIpO2ZvcihpdG0gaW4gdGhpcy5zZWwpe3RoaXMuYWRkKGl0bSwnPGZvbnQgc2l6ZT0iJytpdG0rJyI+Jyt0aGlzLnNlbFtpdG1dKyI8L2ZvbnQ+Iil9fX0pO3ZhciBuaWNFZGl0b3JGb250RmFtaWx5U2VsZWN0PW5pY0VkaXRvclNlbGVjdC5leHRlbmQoe3NlbDp7YXJpYWw6IkFyaWFsIiwiY29taWMgc2FucyBtcyI6IkNvbWljIFNhbnMiLCJjb3VyaWVyIG5ldyI6IkNvdXJpZXIgTmV3IixnZW9yZ2lhOiJHZW9yZ2lhIixoZWx2ZXRpY2E6IkhlbHZldGljYSIsaW1wYWN0OiJJbXBhY3QiLCJ0aW1lcyBuZXcgcm9tYW4iOiJUaW1lcyIsInRyZWJ1Y2hldCBtcyI6IlRyZWJ1Y2hldCIsdmVyZGFuYToiVmVyZGFuYSJ9LGluaXQ6ZnVuY3Rpb24oKXt0aGlzLnNldERpc3BsYXkoIkZvbnQmbmJzcDtGYW1pbHkuLi4iKTtmb3IoaXRtIGluIHRoaXMuc2VsKXt0aGlzLmFkZChpdG0sJzxmb250IGZhY2U9IicraXRtKyciPicrdGhpcy5zZWxbaXRtXSsiPC9mb250PiIpfX19KTt2YXIgbmljRWRpdG9yRm9udEZvcm1hdFNlbGVjdD1uaWNFZGl0b3JTZWxlY3QuZXh0ZW5kKHtzZWw6e3A6IlBhcmFncmFwaCIscHJlOiJQcmUiLGg2OiJIZWFkaW5nJm5ic3A7NiIsaDU6IkhlYWRpbmcmbmJzcDs1IixoNDoiSGVhZGluZyZuYnNwOzQiLGgzOiJIZWFkaW5nJm5ic3A7MyIsaDI6IkhlYWRpbmcmbmJzcDsyIixoMToiSGVhZGluZyZuYnNwOzEifSxpbml0OmZ1bmN0aW9uKCl7dGhpcy5zZXREaXNwbGF5KCJGb250Jm5ic3A7Rm9ybWF0Li4uIik7Zm9yKGl0bSBpbiB0aGlzLnNlbCl7dmFyIEE9aXRtLnRvVXBwZXJDYXNlKCk7dGhpcy5hZGQoIjwiK0ErIj4iLCI8IitpdG0rJyBzdHlsZT0icGFkZGluZzogMHB4OyBtYXJnaW46IDBweDsiPicrdGhpcy5zZWxbaXRtXSsiPC8iK0ErIj4iKX19fSk7bmljRWRpdG9ycy5yZWdpc3RlclBsdWdpbihuaWNQbHVnaW4sbmljU2VsZWN0T3B0aW9ucyk7DQoNCgp2YXIgbmljTGlua09wdGlvbnMgPSB7CglidXR0b25zIDogewoJCSdsaW5rJyA6IHtuYW1lIDogJ0FkZCBMaW5rJywgdHlwZSA6ICduaWNMaW5rQnV0dG9uJywgdGFncyA6IFsnQSddfSwKCQkndW5saW5rJyA6IHtuYW1lIDogJ1JlbW92ZSBMaW5rJywgIGNvbW1hbmQgOiAndW5saW5rJywgbm9BY3RpdmUgOiB0cnVlfQoJfQp9OwoKdmFyIG5pY0xpbmtCdXR0b249bmljRWRpdG9yQWR2YW5jZWRCdXR0b24uZXh0ZW5kKHthZGRQYW5lOmZ1bmN0aW9uKCl7dGhpcy5sbj10aGlzLm5lLnNlbGVjdGVkSW5zdGFuY2Uuc2VsRWxtKCkucGFyZW50VGFnKCJBIik7dGhpcy5hZGRGb3JtKHsiIjp7dHlwZToidGl0bGUiLHR4dDoiQWRkL0VkaXQgTGluayJ9LGhyZWY6e3R5cGU6InRleHQiLHR4dDoiVVJMIix2YWx1ZToiaHR0cDovLyIsc3R5bGU6e3dpZHRoOiIxNTBweCJ9fSx0aXRsZTp7dHlwZToidGV4dCIsdHh0OiJUaXRsZSJ9LHRhcmdldDp7dHlwZToic2VsZWN0Iix0eHQ6Ik9wZW4gSW4iLG9wdGlvbnM6eyIiOiJDdXJyZW50IFdpbmRvdyIsX2JsYW5rOiJOZXcgV2luZG93In0sc3R5bGU6e3dpZHRoOiIxMDBweCJ9fX0sdGhpcy5sbil9LHN1Ym1pdDpmdW5jdGlvbihDKXt2YXIgQT10aGlzLmlucHV0cy5ocmVmLnZhbHVlO2lmKEE9PSJodHRwOi8vInx8QT09IiIpe2FsZXJ0KCJZb3UgbXVzdCBlbnRlciBhIFVSTCB0byBDcmVhdGUgYSBMaW5rIik7cmV0dXJuIGZhbHNlfXRoaXMucmVtb3ZlUGFuZSgpO2lmKCF0aGlzLmxuKXt2YXIgQj0iamF2YXNjcmlwdDpuaWNUZW1wKCk7Ijt0aGlzLm5lLm5pY0NvbW1hbmQoImNyZWF0ZWxpbmsiLEIpO3RoaXMubG49dGhpcy5maW5kRWxtKCJBIiwiaHJlZiIsQil9aWYodGhpcy5sbil7dGhpcy5sbi5zZXRBdHRyaWJ1dGVzKHtocmVmOnRoaXMuaW5wdXRzLmhyZWYudmFsdWUsdGl0bGU6dGhpcy5pbnB1dHMudGl0bGUudmFsdWUsdGFyZ2V0OnRoaXMuaW5wdXRzLnRhcmdldC5vcHRpb25zW3RoaXMuaW5wdXRzLnRhcmdldC5zZWxlY3RlZEluZGV4XS52YWx1ZX0pfX19KTtuaWNFZGl0b3JzLnJlZ2lzdGVyUGx1Z2luKG5pY1BsdWdpbixuaWNMaW5rT3B0aW9ucyk7DQoNCgp2YXIgbmljQ29sb3JPcHRpb25zID0gewoJYnV0dG9ucyA6IHsKCQknZm9yZWNvbG9yJyA6IHtuYW1lIDogX18oJ0NoYW5nZSBUZXh0IENvbG9yJyksIHR5cGUgOiAnbmljRWRpdG9yQ29sb3JCdXR0b24nLCBub0Nsb3NlIDogdHJ1ZX0sCgkJJ2JnY29sb3InIDoge25hbWUgOiBfXygnQ2hhbmdlIEJhY2tncm91bmQgQ29sb3InKSwgdHlwZSA6ICduaWNFZGl0b3JCZ0NvbG9yQnV0dG9uJywgbm9DbG9zZSA6IHRydWV9Cgl9Cn07Cgp2YXIgbmljRWRpdG9yQ29sb3JCdXR0b249bmljRWRpdG9yQWR2YW5jZWRCdXR0b24uZXh0ZW5kKHthZGRQYW5lOmZ1bmN0aW9uKCl7dmFyIEQ9ezA6IjAwIiwxOiIzMyIsMjoiNjYiLDM6Ijk5Iiw0OiJDQyIsNToiRkYifTt2YXIgSD1uZXcgYmtFbGVtZW50KCJESVYiKS5zZXRTdHlsZSh7d2lkdGg6IjI3MHB4In0pO2Zvcih2YXIgQSBpbiBEKXtmb3IodmFyIEYgaW4gRCl7Zm9yKHZhciBFIGluIEQpe3ZhciBJPSIjIitEW0FdK0RbRV0rRFtGXTt2YXIgQz1uZXcgYmtFbGVtZW50KCJESVYiKS5zZXRTdHlsZSh7Y3Vyc29yOiJwb2ludGVyIixoZWlnaHQ6IjE1cHgiLCJmbG9hdCI6ImxlZnQifSkuYXBwZW5kVG8oSCk7dmFyIEc9bmV3IGJrRWxlbWVudCgiRElWIikuc2V0U3R5bGUoe2JvcmRlcjoiMnB4IHNvbGlkICIrSX0pLmFwcGVuZFRvKEMpO3ZhciBCPW5ldyBia0VsZW1lbnQoIkRJViIpLnNldFN0eWxlKHtiYWNrZ3JvdW5kQ29sb3I6SSxvdmVyZmxvdzoiaGlkZGVuIix3aWR0aDoiMTFweCIsaGVpZ2h0OiIxMXB4In0pLmFkZEV2ZW50KCJjbGljayIsdGhpcy5jb2xvclNlbGVjdC5jbG9zdXJlKHRoaXMsSSkpLmFkZEV2ZW50KCJtb3VzZW92ZXIiLHRoaXMub24uY2xvc3VyZSh0aGlzLEcpKS5hZGRFdmVudCgibW91c2VvdXQiLHRoaXMub2ZmLmNsb3N1cmUodGhpcyxHLEkpKS5hcHBlbmRUbyhHKTtpZighd2luZG93Lm9wZXJhKXtDLm9ubW91c2Vkb3duPUIub25tb3VzZWRvd249YmtMaWIuY2FuY2VsRXZlbnR9fX19dGhpcy5wYW5lLmFwcGVuZChILm5vU2VsZWN0KCkpfSxjb2xvclNlbGVjdDpmdW5jdGlvbihBKXt0aGlzLm5lLm5pY0NvbW1hbmQoImZvcmVDb2xvciIsQSk7dGhpcy5yZW1vdmVQYW5lKCl9LG9uOmZ1bmN0aW9uKEEpe0Euc2V0U3R5bGUoe2JvcmRlcjoiMnB4IHNvbGlkICMwMDAifSl9LG9mZjpmdW5jdGlvbihBLEIpe0Euc2V0U3R5bGUoe2JvcmRlcjoiMnB4IHNvbGlkICIrQn0pfX0pO3ZhciBuaWNFZGl0b3JCZ0NvbG9yQnV0dG9uPW5pY0VkaXRvckNvbG9yQnV0dG9uLmV4dGVuZCh7Y29sb3JTZWxlY3Q6ZnVuY3Rpb24oQSl7dGhpcy5uZS5uaWNDb21tYW5kKCJoaWxpdGVDb2xvciIsQSk7dGhpcy5yZW1vdmVQYW5lKCl9fSk7bmljRWRpdG9ycy5yZWdpc3RlclBsdWdpbihuaWNQbHVnaW4sbmljQ29sb3JPcHRpb25zKTsNCg0KCnZhciBuaWNJbWFnZU9wdGlvbnMgPSB7CglidXR0b25zIDogewoJCSdpbWFnZScgOiB7bmFtZSA6ICdBZGQgSW1hZ2UnLCB0eXBlIDogJ25pY0ltYWdlQnV0dG9uJywgdGFncyA6IFsnSU1HJ119Cgl9CgkKfTsKCnZhciBuaWNJbWFnZUJ1dHRvbj1uaWNFZGl0b3JBZHZhbmNlZEJ1dHRvbi5leHRlbmQoe2FkZFBhbmU6ZnVuY3Rpb24oKXt0aGlzLmltPXRoaXMubmUuc2VsZWN0ZWRJbnN0YW5jZS5zZWxFbG0oKS5wYXJlbnRUYWcoIklNRyIpO3RoaXMuYWRkRm9ybSh7IiI6e3R5cGU6InRpdGxlIix0eHQ6IkFkZC9FZGl0IEltYWdlIn0sc3JjOnt0eXBlOiJ0ZXh0Iix0eHQ6IlVSTCIsdmFsdWU6Imh0dHA6Ly8iLHN0eWxlOnt3aWR0aDoiMTUwcHgifX0sYWx0Ont0eXBlOiJ0ZXh0Iix0eHQ6IkFsdCBUZXh0IixzdHlsZTp7d2lkdGg6IjEwMHB4In19LGFsaWduOnt0eXBlOiJzZWxlY3QiLHR4dDoiQWxpZ24iLG9wdGlvbnM6e25vbmU6IkRlZmF1bHQiLGxlZnQ6IkxlZnQiLHJpZ2h0OiJSaWdodCJ9fX0sdGhpcy5pbSl9LHN1Ym1pdDpmdW5jdGlvbihCKXt2YXIgQz10aGlzLmlucHV0cy5zcmMudmFsdWU7aWYoQz09IiJ8fEM9PSJodHRwOi8vIil7YWxlcnQoIllvdSBtdXN0IGVudGVyIGEgSW1hZ2UgVVJMIHRvIGluc2VydCIpO3JldHVybiBmYWxzZX10aGlzLnJlbW92ZVBhbmUoKTtpZighdGhpcy5pbSl7dmFyIEE9ImphdmFzY3JpcHQ6bmljSW1UZW1wKCk7Ijt0aGlzLm5lLm5pY0NvbW1hbmQoImluc2VydEltYWdlIixBKTt0aGlzLmltPXRoaXMuZmluZEVsbSgiSU1HIiwic3JjIixBKX1pZih0aGlzLmltKXt0aGlzLmltLnNldEF0dHJpYnV0ZXMoe3NyYzp0aGlzLmlucHV0cy5zcmMudmFsdWUsYWx0OnRoaXMuaW5wdXRzLmFsdC52YWx1ZSxhbGlnbjp0aGlzLmlucHV0cy5hbGlnbi52YWx1ZX0pfX19KTtuaWNFZGl0b3JzLnJlZ2lzdGVyUGx1Z2luKG5pY1BsdWdpbixuaWNJbWFnZU9wdGlvbnMpOw0KDQoKdmFyIG5pY1NhdmVPcHRpb25zID0gewoJYnV0dG9ucyA6IHsKCQknc2F2ZScgOiB7bmFtZSA6IF9fKCdTYXZlIHRoaXMgY29udGVudCcpLCB0eXBlIDogJ25pY0VkaXRvclNhdmVCdXR0b24nfQoJfQp9OwoKdmFyIG5pY0VkaXRvclNhdmVCdXR0b249bmljRWRpdG9yQnV0dG9uLmV4dGVuZCh7aW5pdDpmdW5jdGlvbigpe2lmKCF0aGlzLm5lLm9wdGlvbnMub25TYXZlKXt0aGlzLm1hcmdpbi5zZXRTdHlsZSh7ZGlzcGxheToibm9uZSJ9KX19LG1vdXNlQ2xpY2s6ZnVuY3Rpb24oKXt2YXIgQj10aGlzLm5lLm9wdGlvbnMub25TYXZlO3ZhciBBPXRoaXMubmUuc2VsZWN0ZWRJbnN0YW5jZTtCKEEuZ2V0Q29udGVudCgpLEEuZWxtLmlkLEEpfX0pO25pY0VkaXRvcnMucmVnaXN0ZXJQbHVnaW4obmljUGx1Z2luLG5pY1NhdmVPcHRpb25zKTsNCg0KCnZhciBuaWNVcGxvYWRPcHRpb25zID0gewoJYnV0dG9ucyA6IHsKCQkndXBsb2FkJyA6IHtuYW1lIDogJ1VwbG9hZCBJbWFnZScsIHR5cGUgOiAnbmljVXBsb2FkQnV0dG9uJ30KCX0KCQp9OwoKdmFyIG5pY1VwbG9hZEJ1dHRvbj1uaWNFZGl0b3JBZHZhbmNlZEJ1dHRvbi5leHRlbmQoe25pY1VSSToiaHR0cDovL2ZpbGVzLm5pY2VkaXQuY29tLyIsYWRkUGFuZTpmdW5jdGlvbigpe3RoaXMuaW09dGhpcy5uZS5zZWxlY3RlZEluc3RhbmNlLnNlbEVsbSgpLnBhcmVudFRhZygiSU1HIik7dGhpcy5teUlEPU1hdGgucm91bmQoTWF0aC5yYW5kb20oKSpNYXRoLnBvdygxMCwxNSkpO3RoaXMucmVxdWVzdEludGVydmFsPTEwMDA7dGhpcy51cmk9dGhpcy5uZS5vcHRpb25zLnVwbG9hZFVSSXx8dGhpcy5uaWNVUkk7bmljVXBsb2FkQnV0dG9uLmxhc3RQbHVnaW49dGhpczt0aGlzLm15RnJhbWU9bmV3IGJrRWxlbWVudCgiaWZyYW1lIikuc2V0QXR0cmlidXRlcyh7d2lkdGg6IjEwMCUiLGhlaWdodDoiMTAwcHgiLGZyYW1lQm9yZGVyOjAsc2Nyb2xsaW5nOiJubyJ9KS5zZXRTdHlsZSh7Ym9yZGVyOjB9KS5hcHBlbmRUbyh0aGlzLnBhbmUucGFuZSk7dGhpcy5wcm9ncmVzc1dyYXBwZXI9bmV3IGJrRWxlbWVudCgiZGl2Iikuc2V0U3R5bGUoe2Rpc3BsYXk6Im5vbmUiLHdpZHRoOiIxMDAlIixoZWlnaHQ6IjIwcHgiLGJvcmRlcjoiMXB4IHNvbGlkICNjY2MifSkuYXBwZW5kVG8odGhpcy5wYW5lLnBhbmUpO3RoaXMucHJvZ3Jlc3M9bmV3IGJrRWxlbWVudCgiZGl2Iikuc2V0U3R5bGUoe3dpZHRoOiIwJSIsaGVpZ2h0OiIyMHB4IixiYWNrZ3JvdW5kQ29sb3I6IiNjY2MifSkuc2V0Q29udGVudCgiJm5ic3AiKS5hcHBlbmRUbyh0aGlzLnByb2dyZXNzV3JhcHBlcik7c2V0VGltZW91dCh0aGlzLmFkZEZvcm0uY2xvc3VyZSh0aGlzKSw1MCl9LGFkZEZvcm06ZnVuY3Rpb24oKXt2YXIgQT10aGlzLm15RG9jPXRoaXMubXlGcmFtZS5jb250ZW50V2luZG93LmRvY3VtZW50O0Eub3BlbigpO0Eud3JpdGUoIjxodG1sPjxib2R5PiIpO0Eud3JpdGUoJzxmb3JtIG1ldGhvZD0icG9zdCIgYWN0aW9uPSInK3RoaXMudXJpKyI/aWQ9Iit0aGlzLm15SUQrJyIgZW5jdHlwZT0ibXVsdGlwYXJ0L2Zvcm0tZGF0YSI+Jyk7QS53cml0ZSgnPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iQVBDX1VQTE9BRF9QUk9HUkVTUyIgdmFsdWU9IicrdGhpcy5teUlEKyciIC8+Jyk7aWYodGhpcy51cmk9PXRoaXMubmljVVJJKXtBLndyaXRlKCc8ZGl2IHN0eWxlPSJwb3NpdGlvbjogYWJzb2x1dGU7IG1hcmdpbi1sZWZ0OiAxNjBweDsiPjxpbWcgc3JjPSJodHRwOi8vaW1hZ2VzaGFjay51cy9pbWcvaW1hZ2VzaGFjay5wbmciIHdpZHRoPSIzMCIgc3R5bGU9ImZsb2F0OiBsZWZ0OyIgLz48ZGl2IHN0eWxlPSJmbG9hdDogbGVmdDsgbWFyZ2luLWxlZnQ6IDVweDsgZm9udC1zaXplOiAxMHB4OyI+SG9zdGVkIGJ5PGJyIC8+PGEgaHJlZj0iaHR0cDovL3d3dy5pbWFnZXNoYWNrLnVzLyIgdGFyZ2V0PSJfYmxhbmsiPkltYWdlU2hhY2s8L2E+PC9kaXY+PC9kaXY+Jyl9QS53cml0ZSgnPGRpdiBzdHlsZT0iZm9udC1zaXplOiAxNHB4OyBmb250LXdlaWdodDogYm9sZDsgcGFkZGluZy10b3A6IDVweDsiPkluc2VydCBhbiBJbWFnZTwvZGl2PicpO0Eud3JpdGUoJzxpbnB1dCBuYW1lPSJuaWNJbWFnZSIgdHlwZT0iZmlsZSIgc3R5bGU9Im1hcmdpbi10b3A6IDEwcHg7IiAvPicpO0Eud3JpdGUoIjwvZm9ybT4iKTtBLndyaXRlKCI8L2JvZHk+PC9odG1sPiIpO0EuY2xvc2UoKTt0aGlzLm15Qm9keT1BLmJvZHk7dGhpcy5teUZvcm09JEJLKHRoaXMubXlCb2R5LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJmb3JtIilbMF0pO3RoaXMubXlJbnB1dD0kQksodGhpcy5teUJvZHkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImlucHV0IilbMV0pLmFkZEV2ZW50KCJjaGFuZ2UiLHRoaXMuc3RhcnRVcGxvYWQuY2xvc3VyZSh0aGlzKSk7dGhpcy5teVN0YXR1cz1uZXcgYmtFbGVtZW50KCJkaXYiLHRoaXMubXlEb2MpLnNldFN0eWxlKHt0ZXh0QWxpZ246ImNlbnRlciIsZm9udFNpemU6IjE0cHgifSkuYXBwZW5kVG8odGhpcy5teUJvZHkpfSxzdGFydFVwbG9hZDpmdW5jdGlvbigpe3RoaXMubXlGb3JtLnNldFN0eWxlKHtkaXNwbGF5OiJub25lIn0pO3RoaXMubXlTdGF0dXMuc2V0Q29udGVudCgnPGltZyBzcmM9Imh0dHA6Ly9maWxlcy5uaWNlZGl0LmNvbS9hamF4LWxvYWRlci5naWYiIHN0eWxlPSJmbG9hdDogcmlnaHQ7IG1hcmdpbi1yaWdodDogNDBweDsiIC8+PHN0cm9uZz5VcGxvYWRpbmcuLi48L3N0cm9uZz48YnIgLz5QbGVhc2Ugd2FpdCcpO3RoaXMubXlGb3JtLnN1Ym1pdCgpO3NldFRpbWVvdXQodGhpcy5tYWtlUmVxdWVzdC5jbG9zdXJlKHRoaXMpLHRoaXMucmVxdWVzdEludGVydmFsKX0sbWFrZVJlcXVlc3Q6ZnVuY3Rpb24oKXtpZih0aGlzLnBhbmUmJnRoaXMucGFuZS5wYW5lKXtuaWNVcGxvYWRCdXR0b24ubGFzdFBsdWdpbj10aGlzO3ZhciBBPW5ldyBia0VsZW1lbnQoInNjcmlwdCIpLnNldEF0dHJpYnV0ZXMoe3R5cGU6InRleHQvamF2YXNjcmlwdCIsc3JjOnRoaXMudXJpKyI/Y2hlY2s9Iit0aGlzLm15SUQrIiZyYW5kPSIrTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpKk1hdGgucG93KDEwLDE1KSl9KS5hZGRFdmVudCgibG9hZCIsZnVuY3Rpb24oKXtBLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoQSl9KS5hcHBlbmRUbyhkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdKTtpZih0aGlzLnJlcXVlc3RJbnRlcnZhbCl7c2V0VGltZW91dCh0aGlzLm1ha2VSZXF1ZXN0LmNsb3N1cmUodGhpcyksdGhpcy5yZXF1ZXN0SW50ZXJ2YWwpfX19LHNldFByb2dyZXNzOmZ1bmN0aW9uKEEpe3RoaXMucHJvZ3Jlc3NXcmFwcGVyLnNldFN0eWxlKHtkaXNwbGF5OiJibG9jayJ9KTt0aGlzLnByb2dyZXNzLnNldFN0eWxlKHt3aWR0aDpBKyIlIn0pfSx1cGRhdGU6ZnVuY3Rpb24oQyl7aWYoQz09ZmFsc2Upe3RoaXMucHJvZ3Jlc3NXcmFwcGVyLnNldFN0eWxlKHtkaXNwbGF5OiJub25lIn0pfWVsc2V7aWYoQy51cmwpe3RoaXMuc2V0UHJvZ3Jlc3MoMTAwKTt0aGlzLnJlcXVlc3RJbnRlcnZhbD1mYWxzZTtpZighdGhpcy5pbSl7dGhpcy5uZS5zZWxlY3RlZEluc3RhbmNlLnJlc3RvcmVSbmcoKTt2YXIgQj0iamF2YXNjcmlwdDpuaWNJbVRlbXAoKTsiO3RoaXMubmUubmljQ29tbWFuZCgiaW5zZXJ0SW1hZ2UiLEIpO3RoaXMuaW09dGhpcy5maW5kRWxtKCJJTUciLCJzcmMiLEIpfXZhciBBPXBhcnNlSW50KHRoaXMubmUuc2VsZWN0ZWRJbnN0YW5jZS5lbG0uZ2V0U3R5bGUoIndpZHRoIikpO2lmKHRoaXMuaW0pe3RoaXMuaW0uc2V0QXR0cmlidXRlcyh7c3JjOkMudXJsLHdpZHRoOihBJiZDLndpZHRoKT9NYXRoLm1pbihBLEMud2lkdGgpOiIifSl9dGhpcy5yZW1vdmVQYW5lKCl9ZWxzZXtpZihDLmVycm9yKXt0aGlzLnJlcXVlc3RJbnRlcnZhbD1mYWxzZTt0aGlzLnNldFByb2dyZXNzKDEwMCk7YWxlcnQoIlRoZXJlIHdhcyBhbiBlcnJvciB1cGxvYWRpbmcgeW91ciBpbWFnZSAoIitDLmVycm9yKyIpLiIpO3RoaXMucmVtb3ZlUGFuZSgpfWVsc2V7aWYoQy5ub3Byb2dyZXNzKXt0aGlzLnByb2dyZXNzV3JhcHBlci5zZXRTdHlsZSh7ZGlzcGxheToibm9uZSJ9KTtpZih0aGlzLnVyaS5pbmRleE9mKCJodHRwOiIpPT0tMXx8dGhpcy51cmkuaW5kZXhPZih3aW5kb3cubG9jYXRpb24uaG9zdCkhPS0xKXt0aGlzLnJlcXVlc3RJbnRlcnZhbD1mYWxzZX19ZWxzZXt0aGlzLnNldFByb2dyZXNzKE1hdGgucm91bmQoKEMuY3VycmVudC9DLnRvdGFsKSo3NSkpO2lmKEMuaW50ZXJ2YWwpe3RoaXMucmVxdWVzdEludGVydmFsPUMuaW50ZXJ2YWx9fX19fX19KTtuaWNVcGxvYWRCdXR0b24uc3RhdHVzQ2I9ZnVuY3Rpb24oQSl7bmljVXBsb2FkQnV0dG9uLmxhc3RQbHVnaW4udXBkYXRlKEEpfTtuaWNFZGl0b3JzLnJlZ2lzdGVyUGx1Z2luKG5pY1BsdWdpbixuaWNVcGxvYWRPcHRpb25zKTsNCg0KdmFyIG5pY1hIVE1MPWJrQ2xhc3MuZXh0ZW5kKHtzdHJpcEF0dHJpYnV0ZXM6WyJfbW96X2RpcnR5IiwiX21vel9yZXNpemluZyIsIl9leHRlbmRlZCJdLG5vU2hvcnQ6WyJzdHlsZSIsInRpdGxlIiwic2NyaXB0IiwidGV4dGFyZWEiLCJhIl0sY3NzUmVwbGFjZTp7ImZvbnQtd2VpZ2h0OmJvbGQ7Ijoic3Ryb25nIiwiZm9udC1zdHlsZTppdGFsaWM7IjoiZW0ifSxzaXplczp7MToieHgtc21hbGwiLDI6Ingtc21hbGwiLDM6InNtYWxsIiw0OiJtZWRpdW0iLDU6ImxhcmdlIiw2OiJ4LWxhcmdlIn0sY29uc3RydWN0OmZ1bmN0aW9uKEEpe3RoaXMubmU9QTtpZih0aGlzLm5lLm9wdGlvbnMueGh0bWwpe0EuYWRkRXZlbnQoImdldCIsdGhpcy5jbGVhbnVwLmNsb3N1cmUodGhpcykpfX0sY2xlYW51cDpmdW5jdGlvbihBKXt2YXIgQj1BLmdldEVsbSgpO3ZhciBDPXRoaXMudG9YSFRNTChCKTtBLmNvbnRlbnQ9Q30sdG9YSFRNTDpmdW5jdGlvbihDLEEsTCl7dmFyIEc9IiI7dmFyIE89IiI7dmFyIFA9IiI7dmFyIEk9Qy5ub2RlVHlwZTt2YXIgUT1DLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7dmFyIE49Qy5oYXNDaGlsZE5vZGVzJiZDLmhhc0NoaWxkTm9kZXMoKTt2YXIgQj1uZXcgQXJyYXkoKTtzd2l0Y2goSSl7Y2FzZSAxOnZhciBIPUMuYXR0cmlidXRlcztzd2l0Y2goUSl7Y2FzZSJiIjpRPSJzdHJvbmciO2JyZWFrO2Nhc2UiaSI6UT0iZW0iO2JyZWFrO2Nhc2UiZm9udCI6UT0ic3BhbiI7YnJlYWt9aWYoQSl7Zm9yKHZhciBGPTA7RjxILmxlbmd0aDtGKyspe3ZhciBLPUhbRl07dmFyIE09Sy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3ZhciBEPUsubm9kZVZhbHVlO2lmKCFLLnNwZWNpZmllZHx8IUR8fGJrTGliLmluQXJyYXkodGhpcy5zdHJpcEF0dHJpYnV0ZXMsTSl8fHR5cGVvZiAoRCk9PSJmdW5jdGlvbiIpe2NvbnRpbnVlfXN3aXRjaChNKXtjYXNlInN0eWxlIjp2YXIgSj1ELnJlcGxhY2UoLyAvZywiIik7Zm9yKGl0bSBpbiB0aGlzLmNzc1JlcGxhY2Upe2lmKEouaW5kZXhPZihpdG0pIT0tMSl7Qi5wdXNoKHRoaXMuY3NzUmVwbGFjZVtpdG1dKTtKPUoucmVwbGFjZShpdG0sIiIpfX1QKz1KO0Q9IiI7YnJlYWs7Y2FzZSJjbGFzcyI6RD1ELnJlcGxhY2UoIkFwcGxlLXN0eWxlLXNwYW4iLCIiKTticmVhaztjYXNlInNpemUiOlArPSJmb250LXNpemU6Iit0aGlzLnNpemVzW0RdKyI7IjtEPSIiO2JyZWFrfWlmKEQpe08rPSIgIitNKyc9IicrRCsnIid9fWlmKFApe08rPScgc3R5bGU9IicrUCsnIid9Zm9yKHZhciBGPTA7RjxCLmxlbmd0aDtGKyspe0crPSI8IitCW0ZdKyI+In1pZihPPT0iIiYmUT09InNwYW4iKXtBPWZhbHNlfWlmKEEpe0crPSI8IitRO2lmKFEhPSJiciIpe0crPU99fX1pZighTiYmIWJrTGliLmluQXJyYXkodGhpcy5ub1Nob3J0LE0pKXtpZihBKXtHKz0iIC8+In19ZWxzZXtpZihBKXtHKz0iPiJ9Zm9yKHZhciBGPTA7RjxDLmNoaWxkTm9kZXMubGVuZ3RoO0YrKyl7dmFyIEU9dGhpcy50b1hIVE1MKEMuY2hpbGROb2Rlc1tGXSx0cnVlLHRydWUpO2lmKEUpe0crPUV9fX1pZihBJiZOKXtHKz0iPC8iK1ErIj4ifWZvcih2YXIgRj0wO0Y8Qi5sZW5ndGg7RisrKXtHKz0iPC8iK0JbRl0rIj4ifWJyZWFrO2Nhc2UgMzpHKz1DLm5vZGVWYWx1ZTticmVha31yZXR1cm4gR319KTtuaWNFZGl0b3JzLnJlZ2lzdGVyUGx1Z2luKG5pY1hIVE1MKTsNCg0KdmFyIG5pY0JCQ29kZT1ia0NsYXNzLmV4dGVuZCh7Y29uc3RydWN0OmZ1bmN0aW9uKEEpe3RoaXMubmU9QTtpZih0aGlzLm5lLm9wdGlvbnMuYmJDb2RlKXtBLmFkZEV2ZW50KCJnZXQiLHRoaXMuYmJHZXQuY2xvc3VyZSh0aGlzKSk7QS5hZGRFdmVudCgic2V0Iix0aGlzLmJiU2V0LmNsb3N1cmUodGhpcykpO3ZhciBCPXRoaXMubmUubG9hZGVkUGx1Z2lucztmb3IoaXRtIGluIEIpe2lmKEJbaXRtXS50b1hIVE1MKXt0aGlzLnhodG1sPUJbaXRtXX19fX0sYmJHZXQ6ZnVuY3Rpb24oQSl7dmFyIEI9dGhpcy54aHRtbC50b1hIVE1MKEEuZ2V0RWxtKCkpO0EuY29udGVudD10aGlzLnRvQkJDb2RlKEIpfSxiYlNldDpmdW5jdGlvbihBKXtBLmNvbnRlbnQ9dGhpcy5mcm9tQkJDb2RlKEEuY29udGVudCl9LHRvQkJDb2RlOmZ1bmN0aW9uKEIpe2Z1bmN0aW9uIEEoRCxDKXtCPUIucmVwbGFjZShELEMpfUEoL1xuL2dpLCIiKTtBKC88c3Ryb25nPiguKj8pPFwvc3Ryb25nPi9naSwiW2JdJDFbL2JdIik7QSgvPGVtPiguKj8pPFwvZW0+L2dpLCJbaV0kMVsvaV0iKTtBKC88c3Bhbi4qP3N0eWxlPSJ0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lOyI+KC4qPyk8XC9zcGFuPi9naSwiW3VdJDFbL3VdIik7QSgvPHVsPiguKj8pPFwvdWw+L2dpLCJbbGlzdF0kMVsvbGlzdF0iKTtBKC88bGk+KC4qPyk8XC9saT4vZ2ksIlsqXSQxW10iKTtBKC88b2w+KC4qPyk8XC9vbD4vZ2ksIltsaXN0PTFdJDFbL2xpc3RdIik7QSgvPGltZy4qP3NyYz0iKC4qPykiLio/Pi9naSwiW2ltZ10kMVsvaW1nXSIpO0EoLzxhLio/aHJlZj0iKC4qPykiLio/PiguKj8pPFwvYT4vZ2ksIlt1cmw9JDFdJDJbL3VybF0iKTtBKC88YnIuKj8+L2dpLCJcbiIpO0EoLzwuKj8+Lio/PFwvLio/Pi9naSwiIik7cmV0dXJuIEJ9LGZyb21CQkNvZGU6ZnVuY3Rpb24oQSl7ZnVuY3Rpb24gQihELEMpe0E9QS5yZXBsYWNlKEQsQyl9QigvXFtiXF0oLio/KVxbXC9iXF0vZ2ksIjxzdHJvbmc+JDE8L3N0cm9uZz4iKTtCKC9cW2lcXSguKj8pXFtcL2lcXS9naSwiPGVtPiQxPC9lbT4iKTtCKC9cW3VcXSguKj8pXFtcL3VcXS9naSwnPHNwYW4gc3R5bGU9InRleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmU7Ij4kMTwvc3Bhbj4nKTtCKC9cW2xpc3RcXSguKj8pXFtcL2xpc3RcXS9naSwiPHVsPiQxPC91bD4iKTtCKC9cW2xpc3Q9MVxdKC4qPylcW1wvbGlzdFxdL2dpLCI8b2w+JDE8L29sPiIpO0IoL1xbXCpcXSguKj8pXFtcL1wqXF0vZ2ksIjxsaT4kMTwvbGk+Iik7QigvXFtpbWdcXSguKj8pXFtcL2ltZ1xdL2dpLCc8aW1nIHNyYz0iJDEiIC8+Jyk7QigvXFt1cmw9KC4qPylcXSguKj8pXFtcL3VybFxdL2dpLCc8YSBocmVmPSIkMSI+JDI8L2E+Jyk7QigvXG4vZ2ksIjxiciAvPiIpO3JldHVybiBBfX0pO25pY0VkaXRvcnMucmVnaXN0ZXJQbHVnaW4obmljQkJDb2RlKTsNCg0KbmljRWRpdG9yPW5pY0VkaXRvci5leHRlbmQoe2Zsb2F0aW5nUGFuZWw6ZnVuY3Rpb24oKXt0aGlzLmZsb2F0aW5nPW5ldyBia0VsZW1lbnQoIkRJViIpLnNldFN0eWxlKHtwb3NpdGlvbjoiYWJzb2x1dGUiLHRvcDoiLTEwMDBweCJ9KS5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KTt0aGlzLmFkZEV2ZW50KCJmb2N1cyIsdGhpcy5yZXBvc2l0aW9uLmNsb3N1cmUodGhpcykpLmFkZEV2ZW50KCJibHVyIix0aGlzLmhpZGUuY2xvc3VyZSh0aGlzKSk7dGhpcy5zZXRQYW5lbCh0aGlzLmZsb2F0aW5nKX0scmVwb3NpdGlvbjpmdW5jdGlvbigpe3ZhciBCPXRoaXMuc2VsZWN0ZWRJbnN0YW5jZS5lO3RoaXMuZmxvYXRpbmcuc2V0U3R5bGUoe3dpZHRoOihwYXJzZUludChCLmdldFN0eWxlKCJ3aWR0aCIpKXx8Qi5jbGllbnRXaWR0aCkrInB4In0pO3ZhciBBPUIub2Zmc2V0VG9wLXRoaXMuZmxvYXRpbmcub2Zmc2V0SGVpZ2h0O2lmKEE8MCl7QT1CLm9mZnNldFRvcCtCLm9mZnNldEhlaWdodH10aGlzLmZsb2F0aW5nLnNldFN0eWxlKHt0b3A6QSsicHgiLGxlZnQ6Qi5vZmZzZXRMZWZ0KyJweCIsZGlzcGxheToiYmxvY2sifSl9LGhpZGU6ZnVuY3Rpb24oKXt0aGlzLmZsb2F0aW5nLnNldFN0eWxlKHt0b3A6Ii0xMDAwcHgifSl9fSk7DQoNCgp2YXIgbmljQ29kZU9wdGlvbnMgPSB7CglidXR0b25zIDogewoJCSd4aHRtbCcgOiB7bmFtZSA6ICdFZGl0IEhUTUwnLCB0eXBlIDogJ25pY0NvZGVCdXR0b24nfQoJfQoJCn07Cgp2YXIgbmljQ29kZUJ1dHRvbj1uaWNFZGl0b3JBZHZhbmNlZEJ1dHRvbi5leHRlbmQoe3dpZHRoOiIzNTBweCIsYWRkUGFuZTpmdW5jdGlvbigpe3RoaXMuYWRkRm9ybSh7IiI6e3R5cGU6InRpdGxlIix0eHQ6IkVkaXQgSFRNTCJ9LGNvZGU6e3R5cGU6ImNvbnRlbnQiLHZhbHVlOnRoaXMubmUuc2VsZWN0ZWRJbnN0YW5jZS5nZXRDb250ZW50KCksc3R5bGU6e3dpZHRoOiIzNDBweCIsaGVpZ2h0OiIyMDBweCJ9fX0pfSxzdWJtaXQ6ZnVuY3Rpb24oQil7dmFyIEE9dGhpcy5pbnB1dHMuY29kZS52YWx1ZTt0aGlzLm5lLnNlbGVjdGVkSW5zdGFuY2Uuc2V0Q29udGVudChBKTt0aGlzLnJlbW92ZVBhbmUoKX19KTtuaWNFZGl0b3JzLnJlZ2lzdGVyUGx1Z2luKG5pY1BsdWdpbixuaWNDb2RlT3B0aW9ucyk7DQoNCg==
EOEC;
		$this->toolbar_bin = <<<EOEC
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
EOEC;
}}
